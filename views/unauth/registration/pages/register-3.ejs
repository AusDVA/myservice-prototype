<!DOCTYPE html>
<html class="js" lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width" name="viewport">
  <title>Register: Proof of identity | MyService</title>
  <link href="docs/css/main.css" rel="stylesheet">
</head>

<body class="uikit-body uikit-grid uikit-refactor">
  <noscript>
    <p role="alert">This website needs JavaScript to work properly.</p>
  </noscript>
  <script>
    window.reallyopen = window.open;
  </script>
  <nav class="uikit-skip-link">
    <a class="uikit-skip-link__link" href="#main-content">Skip to main content</a>
  </nav>
  <% include ../../../global/partials/header-topbar-register.ejs %>
    <% include ../../../global/partials/header-register.ejs %>
      <main>

        <div class="container" id="main-content">
          <div id="progressbar">
            <div id="percentage">
              <p id="percentage_value"></p>
            </div>

          </div>
          <h1>Register
            <span>(Step 3: Proof of identity)</span>
          </h1>

          <div class="row">
            <div class="col-sm-12">

              <div class="has-error has-error-server breakout" id="error-empty-fields" style="display: none">
                <h2>
                  <a name="heading-error" class="heading-error">The following fields need fixing:</a>
                </h2>
                <ul>
                  <li>
                    <a href="#marriageDate">Date of marriage</a>
                  </li>
                </ul>
              </div>

              <div class="change-name-question clearboth" style="display:none;clear: both;">
                <fieldset>
                  <div class="form-group">
                    <label class="uikit-text-input__label">Have you legally changed your name since leaving the ADF?</label>
                    <div class="radio-toggle">
                      <label class="on label-left" for="namechange-yes">
                        <input id="namechange-yes" name="namechange-yes" type="radio">
                        <span>Yes</span>
                      </label>
                      <label class="off label-right" for="namechange-no">
                        <input id="namechange-no" name="namechange-no" type="radio">
                        <span>No</span>
                      </label>
                    </div>
                  </div>
                </fieldset>
              </div>
              <!-- No name change flow -->

              <div class="poiOptions clearboth" style="display: none; clear: both;">
                <fieldset>
                  <legend>Proof of identity
                    <span class="poi-1-2" style="display:none;">1 of 2</span>
                  </legend>
                  <label class="uikit-text-input__label" for="idtype">Register using</label>
                  <select class="uikit-text-input" name="idtype" id="idtype" type="text" value="">
                    <option value=0 selected>-- Select a form of identification --</option>
                    <option value="id01">Australian driver licence</option>
                    <option value="id02">Medicare card</option>
                    <option value="id03">Australian passport</option>
                    <option value="id06">Australian birth certificate</option>
                    <option value="id07">Australian marriage certificate</option>
                    <option value="id05">Certificate of Australian citizenship</option>
                  </select>
                </fieldset>
                <br>
                <br>

                <!-- Driver Licence -->
                <fieldset class="id-types id-licence" style="display: none;">
                  <legend>Australian driver licence</legend>
                  <!--<img src="docs/images/driver-licence-act.png" alt="Sample driver's licence" />-->
                  <div class="form-group">
                    <label class="uikit-text-input__label" for="state">State or Territory driver licence issued</label>
                    <select class="uikit-text-input input-half" name="state" id="state" type="text" value="">
                      <option selected>-- Select state or territory --</option>
                      <option name="act">Australian Capital Territory</option>
                      <option name="nsw">New South Wales</option>
                      <option name="nt">Northern Territory</option>
                      <option name="qld">Queensland</option>
                      <option name="sa">South Australia</option>
                      <option name="tas">Tasmania</option>
                      <option name="vic">Victoria</option>
                      <option name="wa">Western Australia</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label class="uikit-text-input__label" for="licence-number">Driver licence number</span>
                    </label>
                    <input class="uikit-text-input input-half" name="licence-number" id="licence-number" type="text" value="">
                  </div>
                </fieldset>

                <!-- Australian passport -->
                <fieldset class="id-types id-passport" style="display: none">
                  <legend>Australian passport</legend>
                  <div class="form-group">
                    <label class="uikit-text-input__label" for="passport-number">Passport number</label>
                    <input class="uikit-text-input input-half" name="passport-number" id="passport-number" type="text" value="">
                  </div>
                </fieldset>

                <!-- Birth certificate -->
                <% include ../partials/poi-birth-certificate.ejs %>

                  <!-- Medicare -->
                  <fieldset class="id-types id-medicare" style="display: none">
                    <legend>Medicare card</legend>
                    <img src="docs/images/medicare-card.jpg" alt="Medicare card showing the card number, IRN number located to the left of the name on the card, and an expiry date in the format MM/YYYY"
                    />
                    <div class="form-group">
                      <label class="uikit-text-input__label" for="medicare-number">Medicare card number</span>
                      </label>
                      <input class="uikit-text-input input-half" name="medicare-number" id="medicare-number" type="text" value="">
                    </div>
                    <div class="form-group">
                      <label class="uikit-text-input__label" for="irn">Individual Reference Number (IRN)</span>
                      </label>
                      <input class="uikit-text-input dd" name="irn" id="irn" type="text" value="">
                    </div>
                    <div class="form-group">
                      <label class="uikit-text-input__label" for="expiry-dd">Expiry date
                        <span class="hint">(MM / YYYY)</span>
                      </label>
                      <input class="uikit-text-input mm" type="text" name="medicare-expiry-mm" id="medicare-expiry-mm" maxlength="2"> /
                      <input class="uikit-text-input yyyy" type="text" name="medicare-expiry-yyyy" id="medicare-expiry-yyyy" maxlength="4">
                    </div>
                  </fieldset>

                  <!-- Certificate of citizenship -->
                  <fieldset class="id-types id-citizenship" style="display: none">
                    <legend>Certificate of Australian citizenship</legend>
                    <div class="form-group">
                      <label class="uikit-text-input__label" for="acquisition-dd">Acquisition date
                        <span class="hint">(DD / MM / YYYY)</span>
                      </label>
                      <input class="uikit-text-input dd acquisition-dd" type="text" name="acquisition-dd" id="acquisition-dd" maxlength="2" required aria-required="true" aria-label="2 digit day"> /
                      <input class="uikit-text-input mm acquisition-mm" type="text" name="acquisition-mm" id="acquisition-mm" maxlength="2" required aria-required="true" aria-label="2 digit month"> /
                      <input class="uikit-text-input yyyy acquisition-yyyy" type="text" name="acquisition-yyyy" id="acquisition-yyyy" maxlength="4" required aria-required="true" aria-label="4 digit year">
                    </div>
                    <div class="form-group">
                      <label class="uikit-text-input__label" for="citizenship-number">Stock number
                        <span class="hint display-block">This may be found on the back of the certificate</span>
                      </label>
                      <input class="uikit-text-input input-half" name="citizenship-number" id="citizenship-number" type="text" value="">
                    </div>
                  </fieldset>
              </div>

              <!-- Yes name change flow -->

              <!-- POI Options -->
              <div class="namechange-poiOptions clearboth" style="display: none; clear: both">
                <legend>Proof of identity
                  <span class="poi-1-2" style="display:none;">1 of 2</span>
                </legend>
                <label class="uikit-text-input__label" for="name-idtype">Register using</label>
                <select class="uikit-text-input" name="name-idtype" id="name-idtype" type="text" value="">
                  <option value=0 selected>-- Select a form of identification --</option>
                  <option value="id08">Australian marriage certificate</option>
                  <option value="id09">Change of name certificate</option>
                </select>
              </div>

              <!-- Marriage Certificate-->
              <% include ../partials/poi-marriage-certificate.ejs %>

                <!-- Change of Name Certificate -->
                <% include ../partials/poi-change-of-name.ejs %>

                  <!-- END FORM -->

            </div>
          </div>

          <div class="row">
            <div class="col-xs-12">
              <div class="pagination">
                <button class="uikit-btn uikit-btn--tertiary" onclick="window.location.href = 'register-2'">Previous</button>
                <button class="uikit-btn uikit-btn--tertiary" onclick="window.location.href = '#open-cancelrego-modal'">Cancel registration</button>
                <button class="uikit-btn floated btnNext">Next</button>
              </div>
            </div>
          </div>

        </div>
      </main>

      <% include ../../../auth/cover/partials/removefile-modal.ejs %>
        <% include ../partials/cancelrego-modal.ejs %>
          <% include ../../../global/partials/footer.ejs %>

            <script src="/docs/js/jquery-effects.js"></script>
            <script src="/docs/js/main.js"></script>
            <script src="/docs/js/jquery-3.2.1.min.js"></script>
            <script>
              // Progress percentage
              document.getElementById("percentage").style.width = "80%";
              document.getElementById("percentage_value").textContent = "80%";

              if ("stillserving" in sessionStorage) {
                $(".change-name-question").hide();
                $(".poiOptions").show();
                $(".poi-1-2").hide();

              };

              if ("formerserving" in sessionStorage) {
                $(".change-name-question").show();
                $(".poi-1-2").hide();
              };

              if ("neverserved" in sessionStorage) {
                $(".change-name-question").hide();
                $(".poiOptions").show();
                $(".poi-1-2").show();
              };
              if ("2poi" in sessionStorage) {
                $(".poi-1-2").show();
              };

              if ("pmkeysyes" in sessionStorage) {
                $("#enlistment-date").show();

              };


              // Name change question logic
              $("#namechange-yes").click(function () {
                $(".namechange-poiOptions").show("fast");
                $(".poiOptions").hide("fast");
                $(".id-marriage").hide("fast");
                $(".id-changename").hide("fast");
                $('#name-idtype').val(0);
                $('#namechange-no').val(0);
              });
              $("#namechange-no").click(function () {
                $(".namechange-poiOptions").hide("fast");
                $(".poiOptions").show("fast");
                $(".id-marriage").hide("fast");
                $('#idtype').val(0);
                $('#namechange-yes').val(0);
              });

              // Choose POI fieldset for those who haven't changed their name
              var IdType = jQuery('#idtype');
              var select = this.value;
              IdType.change(function () {
                // Test if a POI is open already, to display warning modal
                // if ( $('.id-types').css('display') != 'none' ) {
                //   alert('div already open');
                // }
                if ($(this).val() == 'id01') {
                  $('.id-types').hide();
                  $('.id-licence').show();
                }
                if ($(this).val() == 'id02') {
                  $('.id-types').hide();
                  $('.id-medicare').show();
                }
                if ($(this).val() == 'id03') {
                  $('.id-types').hide();
                  $('.id-passport').show();
                }
                if ($(this).val() == 'id04') {
                  $('.id-types').hide();
                  $('.id-descent').show();
                }
                if ($(this).val() == 'id05') {
                  $('.id-types').hide();
                  $('.id-citizenship').show();
                }
                if ($(this).val() == 'id06') {
                  $('.id-types').hide();
                  $('.id-birth').show();
                }
                if ($(this).val() == 'id07') {
                  $('.id-types').hide();
                  $('.id-marriage').show();
                }
              });

              // Choose POI fieldset for those who HAVE changed their name
              var NameIdType = jQuery('#name-idtype');
              var select = this.value;
              NameIdType.change(function () {

                if ($(this).val() == 'id08') {
                  $('.name-id-types').hide();
                  $('.id-changename').hide();
                  $('.id-marriage').show();
                  $('.changenameFields').hide();
                  $('#marriednameState').val(0);
                }
                if ($(this).val() == 'id09') {
                  $('.name-id-types').hide();
                  $('.id-marriage').hide();
                  $('.id-changename').show();
                  $('.marriageFields').hide();
                  $('#changenameState').val(0);
                }
              });

              // Prefill
              $(".first-name").val(localStorage.firstName);
              $(".middle-name").val(localStorage.middleName);
              $(".last-name").val(localStorage.lastName);
              $(".dob-dd").val(localStorage.myDd);
              $(".dob-mm").val(localStorage.myMm);
              $(".dob-yyyy").val(localStorage.myYyyy);

              // Determine which path
              $('.btnNext').click(function () {

                if ("neverserved" in sessionStorage) {
                  location.href = '/register-5';
                } else if ("2poi" in sessionStorage) {
                  location.href = '/register-5';
                }
                else {
                  window.reallyopen('/register-4', '_blank');
                  location.href = '/email-rego-success';
                  $(".poi-1-2").hide();
                };
              });

            </script>


</body>

</html>
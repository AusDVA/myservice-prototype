<!DOCTYPE html>
<html class="js" lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width" name="viewport">
  <title>Home | MyService</title>
  <link href="docs/css/main.css" rel="stylesheet">
</head>

<body class="uikit-body uikit-grid uikit-refactor">
  <noscript>
    <p role="alert">This website needs JavaScript to work properly.</p>
  </noscript>
  <nav class="uikit-skip-link">
    <a class="uikit-skip-link__link" href="#main-content">Skip to main content</a>
  </nav>
  <% include ../global/partials/header-topbar.ejs %>
  <% include ../global/partials/header-authenticated.ejs %>
  <main>
    <section>
      <div class="container margin-above margin-below--extra" id="claim-activity">
        <section class="widget">
          <div class="row margin-above">
            <div class="col-sm-3">
              <ul class="secondary-navigation">
                <li class="secondary-navigation__item">
                  <a class="secondary-navigation__link" href="profile-contact">Service history</a>
                </li>


                <li class="secondary-navigation__item">
                  <a class="secondary-navigation__link" href="profile-contact">Relationships</a>
                </li>


                <li class="secondary-navigation__item">
                  <a class="secondary-navigation__link" href="profile-account">Income and assets</a>
                </li>


                <li class="secondary-navigation__item">
                  <a class="secondary-navigation__link" href="profile-history">Bank details</a>
                </li>


                <li class="secondary-navigation__item secondary-navigation__item--active">
                  <a class="secondary-navigation__link" href="profile-contact">Nominated representative</a>
                </li>


                <li class="secondary-navigation__item">
                  <a class="secondary-navigation__link" href="profile-contact">Overseas travel</a>
                </li>


                <li class="secondary-navigation__item">
                  <a class="secondary-navigation__link" href="profile-account">Hnours and military awards</a>
                </li>


                <li class="secondary-navigation__item">
                  <a class="secondary-navigation__link" href="profile-history">Commemoration preferences</a>
                </li>
              </ul>
              <!-- end side nav ul -->
            </div>
            <!-- end side nav col -->


            <div class="col-sm-9">
              <h1 class="margin-above--none">Representative agreements</h1>


              <h2>Who represents me</h2>


              <table class="table-claims table-responsive">
                <!-- who represents me table -->


                <thead>
                  <tr>
                    <th class="widget-activity">Representatives</th>

                    <th class="widget-actions">Actions</th>
                  </tr>
                </thead>


                <tbody>
                  <tr>
                    <td>
                      <p class="status-icon status-submitted">John Wilson<span><strong><em>&nbsp;Roles tags go here</em></strong></span><br>
                        <span>Status here <em>� 10 January 2019</em></span></p>
                    </td>

                    <td class="widget-actions"><button class="uikit-btn small uikit-btn--tertiary" onclick="window.location.href = '/viewServicePensionDetail'">View</button>
                    </td>
                  </tr>


                  <tr>
                    <td>
                      <p class="status-icon status-in-progress">Mary Jones<span><strong><em>&nbsp;Roles tags go here</em></strong></span><br>
                        <span>Status here <em>� 27 April 2018</em></span></p>
                    </td>

                    <td class="widget-actions"><button class="uikit-btn small uikit-btn--tertiary" onclick="window.location.href = 'updateClaimInProgress'">Upload</button> <button
                        class="uikit-btn small uikit-btn--tertiary" onclick="window.location.href = 'viewClaimInProgress'">View</button> <button class="uikit-btn small uikit-btn--tertiary"
                        id="button-withdrawclaimmodal">Withdraw</button></td>
                  </tr>


                  <tr>
                    <td>
                      <p class="status-icon status-approved">Alice Thompson<span><strong><em>&nbsp;Roles tags go here</em></strong></span><br>
                        <span>Status here <em>� 3 May 2018</em></span></p>
                    </td>

                    <td class="widget-actions"><button class="uikit-btn small uikit-btn--tertiary" onclick="window.location.href = 'qs-claimdetail'">Manage</button>
                    </td>
                  </tr>


                  <tr>
                    <td>
                      <p class="status-icon status-incomplete">Jane Benson<span><strong><em>&nbsp;Roles tags go here</em></strong></span><br>
                        <span>Status here <em>� 27 April 2018</em></span></p>
                    </td>

                    <td class="widget-actions"><button class="uikit-btn small uikit-btn--tertiary" onclick="window.location.href = 'afi-claim1'">Resume</button> <button class="uikit-btn small uikit-btn--tertiary"
                        onclick="window.location.href = '#open-deleteclaimmodal'">Withdraw</button></td>
                  </tr>


                  <tr>
                    <td>
                      <p class="status-icon status-rejected">Peter Smith<span><strong><em>&nbsp;Roles tags go here</em></strong></span><br>
                        <span>Status here <em>� 27 April 2018</em></span></p>
                    </td>

                    <td class="widget-actions"><button class="uikit-btn small uikit-btn--tertiary" onclick="window.location.href = 'viewClaimRejected'">View</button>
                    </td>
                  </tr>


                  <tr class="show-instance-withdrawn">
                    <td>
                      <p class="status-icon status-withdrawn">Harold Townsend<span><strong><em>&nbsp;Roles tags go here</em></strong></span><br>
                        <span>Status here <em>� 3 Jan 2018</em></span></p>
                    </td>

                    <td class="widget-actions"><button class="uikit-btn small uikit-btn--tertiary" onclick="window.location.href = 'viewClaimWithdrawn'">View</button>
                    </td>
                  </tr>
                </tbody>
              </table>
              <!-- end who represents me table -->


              <h2>Who I represent</h2>


              <table class="table-claims table-responsive">
                <!-- who I represent table -->


                <thead>
                  <tr>
                    <th class="widget-activity">Representees</th>

                    <th class="widget-actions">Actions</th>
                  </tr>
                </thead>


                <tbody>
                  <tr>
                    <td>
                      <p class="status-icon status-approved">Alice Thompson<span><strong><em>&nbsp;Roles tags go here</em></strong></span><br>
                        <span>AStatus here <em>� 3 May 2018</em></span></p>
                    </td>

                    <td class="widget-actions"><button class="uikit-btn small uikit-btn--tertiary" onclick="window.location.href = 'qs-claimdetail'">Manage</button>
                    </td>
                  </tr>
                </tbody>
              </table>
              <!-- end who I represent table -->
            </div>
            <!-- end rep listing col -->
          </div>
          <!-- end row -->
        </section>
      </div>
    </section>
  </main>

  <% include ../auth/partials/modal-deleteclaim.ejs %>
  <% include ../auth/partials/modal-withdrawclaim.ejs %>
  <% include ../global/partials/footer.ejs %>
  <script>

    function makeToast(pType, pMessage) {
      var $element = $('<button class="uikit-btn toast" role="alert" type="button">');
      $element.append('<div class="toast__type toast__type--' + pType + '">').children().last().append(
        '<span class="sr">' +
        pType + '</span>');
      $element.append('<div class="toast__message">').children().last().append('<p>' + pMessage + '</p>');
      return $('<div class="toast-container"></div>').append($element);
    }

    if (localStorage.getItem('updateClaimInProgress')) {
      var settings = JSON.parse(localStorage.getItem('updateClaimInProgress'));

      var submitted = settings.actions.some(pAction => {
        return pAction.status === 'submitted'
      })

      if (submitted) {
        $('#main-content').append(makeToast('success', 'Documents successfully submitted'))

      }

      settings.actions.forEach(pAction => {
        if (pAction.status === 'submitted') {
          pAction.status = 'complete'
        }
      })

      localStorage.setItem('updateClaimInProgress', JSON.stringify(settings))
    }

    $(document).ready(function () {
      var claimWithdrawn = localStorage.getItem('claim-withdrawn');
      if (claimWithdrawn) {
        $(".show-instance-action-required").hide();
        $(".show-instance-withdrawn").show();
      } else {
        $(".show-instance-action-required").show();
        $(".show-instance-withdrawn").hide();
      }
      $("#button-withdrawclaimmodal").click(function () {
        localStorage.setItem('claim-withdrawn', true);
        $(".show-instance-action-required").hide();
        $(".show-instance-withdrawn").show();
        window.location.href = '#open-withdrawclaimmodal';
      });
    });

    $(document).ready(function () {
      const hoverContainer = document.getElementsByClassName('hover-container')[0]
      const hoverElements = document.getElementsByClassName('hover-element')

      Array.prototype.forEach.call(hoverElements, hoverElement => {
        hoverElement.addEventListener('mouseover', (event) => {
          hoverElement.classList.add('hover-element--active')
        })

        hoverElement.addEventListener('mouseout', (event) => {
          hoverElement.classList.remove('hover-element--active')
        })
      })

      hoverContainer.addEventListener('mouseover', (event) => {
        if (event.target !== hoverContainer) {
          hoverContainer.classList.add('hover-container--faded')
        }
      })

      hoverContainer.addEventListener('mouseout', (event) => {
        hoverContainer.classList.remove('hover-container--faded')
      })
    });
  </script>
</body>

</html>
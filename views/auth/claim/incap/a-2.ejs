<!DOCTYPE html>
<html class="js" lang="en">

<head>
  <title>Add claim: Incapacity Payments | MyService</title>
  <%- include(partials+"components/layout/head") %>
</head>

<body class="uikit-body uikit-grid uikit-refactor">
  <noscript>
    <p role="alert">This website needs JavaScript to work properly.</p>
  </noscript>
  <nav class="uikit-skip-link">
    <a class="uikit-skip-link__link" href="#main-content">Skip to main content</a>
  </nav>
  <%- include(partials+"components/layout/header-topbar") %>
  <%- include(partials+"components/layout/header-nom-rep") %>
  <main>

    <div id="main-content" class="section-feature border-bottom--mild margin-above--none margin-below--none padding-below">

      <div class="container margin-above--none">
        <!-- Progress bar -->
        <div class="col-xs-12">
          <nav>
            <ul class="progress-container">
              <li class="progress-step progress-step--done">
                <span class="progress-step__icon"></span>
                <p class="progress-step-label">Your lost earnings</p>
              </li>
              <li class="progress-step progress-step--active">
                <span class="progress-step__icon"></span>
                <p class="progress-step-label">Cause of incapacity</p>
              </li>
              <li class="progress-step ongoing-only progress-step--last">
                <span class="progress-step__icon"></span>
                <p class="progress-step-label">Periods of incapacity</p>
              </li>
            </ul>
          </nav>
        </div>

        <h1 class="margin-above--none ss-align--center">
          <span class="heading">Cause of incapacity</span>
        </h1>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-md-offset-2 col-md-8">

          <div class="margin-above--extra margin-below--extra">

            <%- include(partials+"components/form-partials/dropdown", {
                label: "Select the primary cause of your incapacity",
                hint: "<BR/>This list shows your accepted conditions",
                id: "primary",
                options: [
                  "Select a condition",
                  "Depression",
                  "Lumbar spondylosis",
                  "Tinnitus",
                  "Osteoarthritis (DRCA)",
                  "Osteoarthritis (MRCA)"
                ]
              }); %>

            <div id="conditions" class="margin-below--large" style="display: none;">

              <div class="borderless-table">
                <div class="borderless-table__row">
                  <div class="borderless-table__title">
                    <b>Date of onset</b>
                  </div>
                  <div class="borderless-table__value">
                    21/05/2014
                  </div>
                </div>
                <div class="borderless-table__row">
                  <div class="borderless-table__title">
                    <b>Covered under</b>
                  </div>
                  <div class="borderless-table__value">
                    MRCA
                  </div>
                </div>
              </div>
              <hr style="margin-top: 20px;">
            </div>

            <%- include(partials+"components/form-partials/checkbox", {
              label: "Select any other conditions that are affecting your capacity to work",
              hint: "<BR/>(select all that apply)",
              id: "other-conditions",
              boxes: [
                "Depression",
                "Lumbar spondylosis",
                "Tinnitus",
                "Osteoarthritis (DRCA)",
                "Osteoarthritis (MRCA)"
              ]
            }); %>

          </div>
        </div>

        <div class="pagination pagination--ss-reverse-order">
          <button class="uikit-btn uikit-btn--tertiary btnPrev" id="btnPrev">Previous</button>
          <button class="uikit-btn uikit-btn--tertiary" onclick="window.location.href = '#open-modal'">Cancel</button>
          <div class="floated">
            <button class="uikit-btn uikit-btn--tertiary" onclick="window.location.href = '/auth/claim?user=INCAPuser-incomplete'">Save and exit</button>
            <button class="uikit-btn btnNext" id="btnNext">Save and next</button>
          </div>
        </div>

      </div>

    </div>
    </div>

    <%- include(partials+"content/modals/claims-cancel-modal") %>
    </div>

  </main>

  <%- include(partials+"components/layout/footer") %>


  <script>
    $(Document).ready(function () {

      $("input:checkbox").prop("checked", false);

      $("#btnPrev").click(function () {
        window.location.href = "/auth/claim/incap/a-1"
      });
      $("#btnNext").click(function () {
        window.location.href = "/auth/claim/incap/a-3"
      });

      $('#primary').prop('selectedIndex', 0);
      $("#primary").change(function () {
        $("input:checkbox").prop("checked", false);
        var mySelection = $('#primary :selected').val();
        $("#other-conditions-1").parent().parent().show();
        $("#other-conditions-2").parent().parent().show();
        $("#other-conditions-3").parent().parent().show();
        $("#other-conditions-4").parent().parent().show();
        $("#other-conditions-5").parent().parent().show();
        switch (mySelection) {
          case "selectacondition":
            $("#conditions").hide();
            break;
          case "depression":
            $("#other-conditions-1").parent().parent().hide();
            $("#conditions").show();
            $("#selected-label").text("Depression");
            $("#date-label").text("21/05/2014");
            $("#act-label").text("MRCA");
            break;
          case "lumbarspondylosis":
            $("#other-conditions-2").parent().parent().hide();
            $("#conditions").show();
            $("#selected-label").text("Lumbar spondylosis");
            $("#date-label").text("18/11/2008");
            $("#act-label").text("MRCA");
            break;
          case "tinnitus":
            $("#other-conditions-3").parent().parent().hide();
            $("#conditions").show();
            $("#selected-label").text("Tinnitus");
            $("#date-label").text("03/06/2003");
            $("#act-label").text("MRCA");
            break;
          case "osteoarthritisdrca":
            $("#other-conditions-4").parent().parent().hide();
            $("#conditions").show();
            $("#selected-label").text("Osteoarthritis");
            $("#date-label").text("12/03/2011");
            $("#act-label").text("DRCA");
            break;
          case "osteoarthritismrca":
            $("#other-conditions-5").parent().parent().hide();
            $("#conditions").show();
            $("#selected-label").text("Osteoarthritis");
            $("#date-label").text("12/03/2011");
            $("#act-label").text("MRCA");
            break;
          default:
            break;
        }

      });

      // check to see if user is claiming for ongoing payments but not interested in 'loss of civilian earnings'. This user should not see 'Employment' page in their progress bar.
      if ("flow2" in localStorage) {
        $(".employed").hide();
      } else {
        $(".employed").show();
      };

      $('input[name=checkbox-5]').change(function () {
        if ($(this).is(':checked')) {
          $("#condition-not-in-list").show();
        } else {
          $("#condition-not-in-list").hide();;
        }
      });
      $("#addanotherbtn").click(function () {
        $("#addanothercondition").show();
        $("#addanotherbtn").hide();
      });
      $("#btnSave").click(function () {
        $("#addanothercondition").hide();
        $("#addanotherbtn").show();
        $("#customcondition").show();
      });
      $("#btnCancel").click(function () {
        $("#addanothercondition").hide();
        $("#addanotherbtn").show();
      });
      $("#btnRemove").click(function () {
        $("#customcondition").hide();
      });



    });
  </script>

</body>

</html>

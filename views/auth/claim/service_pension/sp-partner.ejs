<!DOCTYPE html>
<html class="js" lang="en">

<head>
  <title>Service Pension - Partner | MyService</title>
<% include ../../../../partials/head.ejs %>
  <style type="text/css">
    div.table {
      border: 0;
      display: table;
    }

    div.tr {
      border: 0;
      display: table-row;
    }

    div.td {
      border: 0;
      display: table-cell;
      padding-right: 15px;
    }

    hr {
      margin: 0;
    }

    .ledger-rule {
      margin: 15px 0 15px 0;
      background-color: #ddd;
      height: 1px;
    }
  </style>
</head>

<body class="uikit-body uikit-grid uikit-refactor"></body>
<noscript>
  <p role="alert">This website needs JavaScript to work properly.</p>
</noscript>
<nav class="uikit-skip-link">
  <a class="uikit-skip-link__link" href="#main-content">Skip to main content</a>
</nav>
<% include ../../../../partials/header-topbar.ejs %>
<% include ../../../../partials/header-nom-rep.ejs %>
<main>
  <div id="main-content" class="section-feature border-bottom--mild margin-above--none margin-below--none padding-below">
    <div class="container margin-above--none">
      <!-- Progress bar -->
      <div class="col-md-12">
        <nav>
          <ul class="progress-container">
            <li class="progress-step progress-step--active">
              <a href="/auth/claim/service_pension/sp-partner">
                <span class="progress-step__icon"></span>
                <p class="progress-step-label">Relationship status</p>
              </a>
            </li>
            <li class="progress-step">
              <a href="/auth/claim/service_pension/sp-dependant">
                <span class="progress-step__icon"></span>
                <p class="progress-step-label">Dependent children</p>
              </a>
            </li>
            <li class="progress-step">
              <a href="/auth/claim/service_pension/sp-residency">
                <span class="progress-step__icon"></span>
                <p class="progress-step-label">Residency</p>
              </a>
            </li>
            <li class="progress-step">
              <a href="/auth/claim/service_pension/sp-la">
                <span class="progress-step__icon"></span>
                <p class="progress-step-label">Living arrangements</p>
              </a>
            </li>
            <li class="progress-step">
              <a href="/auth/claim/service_pension/sp-claim-contact">
                <span class="progress-step__icon"></span>
                <p class="progress-step-label">Claim Representative</p>
              </a>
            </li>
            <li class="progress-step progress-step--last">
              <a href="/auth/claim/service_pension/sp-payment-details">
                <span class="progress-step__icon"></span>
                <p class="progress-step-label">Payment details</p>
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
    <!-- Page heading -->
    <h1 class="margin-above--none ss-align--center">
      <span class="heading">Relationship status</span>
    </h1>
  </div> <!-- container end -->
  <div class="container" id="cleanskin">
    <div class="row">
      <div class="col-md-offset-2 col-md-8">
        <div class="margin-above--extra margin-below--extra">
        <!-- Page content -->
        <!-- current relationship status -->
        <% 
          locals = new Object();
          locals.question = 'What is your CURRENT relationship status?';
          locals.optionalID = 'relationship-status';
          locals.items = ["Single","Married","De-facto","Separated (while still legally married)","Divorced","Widowed"];
          locals.optionalItemID = ["single","married","defacto","separated","divorced","widowed"];
        %>
        <%- include ../../../../partials/forms/radio.ejs %>
          <!-- A -->
          <div class="form-group" id="date-marriage">
            <fieldset>
              <label class="uikit-text-input__label">Date of marriage
                <span class="hint">(dd / mm / yyyy)</span>
              </label>
              <input class="uikit-text-input dd" type="text" name="enlistStartDay" maxlength="2" required aria-required="true" aria-label="2 digit day"> /
              <input class="uikit-text-input mm" type="text" name="enlistStartMonth" maxlength="2" required aria-required="true" aria-label="2 digit month"> /
              <input class="uikit-text-input yyyy" type="text" name="enlistStartYear" maxlength="4" required aria-required="true" aria-label="4 digit year">
            </fieldset>
          </div>
          <!-- B -->
          <div class="form-group" id="date-living-together">
            <fieldset>
              <label class="uikit-text-input__label">Date commenced living together
                <span class="hint">(dd / mm / yyyy)</span>
              </label>
              <input class="uikit-text-input dd" type="text" name="enlistStartDay" maxlength="2" required aria-required="true" aria-label="2 digit day"> /
              <input class="uikit-text-input mm" type="text" name="enlistStartMonth" maxlength="2" required aria-required="true" aria-label="2 digit month"> /
              <input class="uikit-text-input yyyy" type="text" name="enlistStartYear" maxlength="4" required aria-required="true" aria-label="4 digit year">
            </fieldset>
          </div>
          <div class="form-group" id="date-separation" style="display: none;">
            <fieldset>
              <label class="uikit-text-input__label">Date separated
                <span class="hint">(dd / mm / yyyy)</span>
              </label>
              <input class="uikit-text-input dd" type="text" name="enlistStartDay" maxlength="2" required aria-required="true" aria-label="2 digit day"> /
              <input class="uikit-text-input mm" type="text" name="enlistStartMonth" maxlength="2" required aria-required="true" aria-label="2 digit month"> /
              <input class="uikit-text-input yyyy" type="text" name="enlistStartYear" maxlength="4" required aria-required="true" aria-label="4 digit year">
            </fieldset>
          </div>
           <div class="form-group" id="date-divorced" style="display: none;">
            <fieldset>
              <label class="uikit-text-input__label">Date of divorce
                <span class="hint">(dd / mm / yyyy)</span>
              </label>
              <input class="uikit-text-input dd" type="text" name="enlistStartDay" maxlength="2" required aria-required="true" aria-label="2 digit day"> /
              <input class="uikit-text-input mm" type="text" name="enlistStartMonth" maxlength="2" required aria-required="true" aria-label="2 digit month"> /
              <input class="uikit-text-input yyyy" type="text" name="enlistStartYear" maxlength="4" required aria-required="true" aria-label="4 digit year">
            </fieldset>
          </div>
          <!-- G -->
          <div class="form-group" id="partner-details">
            <h2 class="margin-above margin-below"><span class="font-weight-heavy">Partner details</span></h2>
            <div class="form-group title">
              <% include ../../../../partials/forms/title-list-pd.ejs %>
            </div>
            <div class="form-group margin-above--large">
              <label class="uikit-text-input__label" for="tags">Given name <span class="hint">(first name)</span></label>
              <input class="uikit-text-input" name="tags" id="tags" type="text" value="">
            </div>
            <div class="form-group margin-above--large">
              <label class="uikit-text-input__label" for="tags">Surname <span class="hint">(last name)</span></label>
              <input class="uikit-text-input" name="tags" id="tags" type="text" value="">
            </div>
            <!-- Former names -->
            <%
            locals = {};
              locals.question = 'Has your partner ever used or been known by other names?'; 
              locals.optionalHint = 'For example, name at birth, maiden name, previous married name'; 
              locals.optionalID = 'other_names'; 
            %>
            <% include ../../../../partials/forms/radio--yes-no.ejs %>
            <%
              locals = {};
              locals.optionalHide = true;
              locals.optionalID = "former_names"
            %>
            <% include ../../../../partials/forms/former-names.ejs %>
            <div class="form-group">
              <fieldset>
                  <label class="uikit-text-input__label">Partnerâ€™s date of birth
                    <span class="hint">(dd / mm /yyyy)</span>
                  </label>
                  <input class="uikit-text-input dd" type="text" name="enlistStartDay" maxlength="2" required aria-required="true" aria-label="2 digit day"> /
                  <input class="uikit-text-input mm" type="text" name="enlistStartMonth" maxlength="2" required aria-required="true" aria-label="2 digit month"> /
                  <input class="uikit-text-input yyyy" type="text" name="enlistStartYear" maxlength="4" required aria-required="true" aria-label="4 digit year">
              </fieldset>
            </div>
            <!-- Partner phone number -->
            <%
            locals = {};
            locals.question = "Partner's phone number";
            locals.optionalID = 'partner_phone';
            %>
            <% include ../../../../partials/forms/field.ejs %>
            <!-- Partner email address -->
            <%
            locals = {};
            locals.question = "Partner's email address?";
            locals.optionalID = 'partner_email';
            %>
            <% include ../../../../partials/forms/field.ejs %>
            <div class="form-group">
              <div class="uikit-text-input__label-wrapper--inline-block">
                <legend class="uikit-text-input__label legend-label" id="question_gender">Gender</legend>
              </div>
              <div class="tooltip">
                <div id="gender-tt-label" class="tooltip__control" tabindex="0" role="button" aria-controls="gender-tt-message" aria-expanded="false">
                  <div class="tooltip__label tooltip__label--icon-only">
                    <a>Gender help</a>
                  </div>
                  <div class="tooltip__tab"></div>
                </div>
                <div id="gender-tt-message" class="tooltip__content" aria-labelledby="gender-tt-label" role="region" tabindex="-1" aria-hidden="true">
                  <div class="tooltip__message">Currently, our system only allows us to record gender as male or female. If your partner doesn't identify as either, you can inform
                    DVA after your claim is processed.</div>
                  <div class="tooltip__close" role="button" tabindex="0">Close</div>
                </div>
              </div>
              <div class="radio-toggle">
                <label class="on label-left" for="gender-male">
                  <input id="gender-male" name="gender" type="radio">
                  <span>Male</span>
                </label>
                <label class="off label-right" for="gender-female">
                  <input id="gender-female" name="gender" type="radio">
                  <span>Female</span>
                </label>
              </div>
            </div>
          <!-- Centrelink -->
          <% 
            locals = {};
            locals.question = 'Has your partner applied for or do they receive any of the following Centrelink payments?'; 
            locals.items = ["Age pension","Disability support pension","Carer payment","Newstart allowance","Other"];
            locals.optionalHint = 'Select all that apply.'; 
            locals.optionalID = "cs_centrelink";            
            %>
          <% include ../../../../partials/forms/checkbox.ejs %>
          <!-- CSHC -->  
          <%
            locals = {};
            locals.question = 'Has your partner applied for or do they currently hold a Commonwealth seniors health card (CSHC) from Centrelink?'; 
            locals.optionalID = 'cs_cshc'; 
          %>
          <% include ../../../../partials/forms/radio--yes-no.ejs %>
          <!-- CRN -->
          <% 
            locals = {}
            locals.question = "What is your partner's Centrelink reference number (CRN)?"; 
            locals.optionalID = 'cs_crn';
            locals.optionalShort = true; 
            // locals.optionalHide = true;
            %>
          <% include ../../../../partials/forms/field.ejs %>
        </div>
        <div id="save-and-next" class="margin-above" style="display: none">
          <p>Choose <b>save and next</b> to continue.</p>
        </div>
      </div>
    </div>
  </div><!-- bottom page navigation end -->
  <% include ../../../../partials/claims-cancel-modal.ejs %>
  </div> <!-- container end -->
  <div class="container" id="partnered-pre-pop" style="display: none;">
    <div class="row">
      <div class="col-md-offset-2 col-md-8">
        <div class="margin-above--extra margin-below--extra">
          <div id="partnered-pre-pop--current-partner" class="form-group margin-above--large">
            <legend class="legend-label">Is this your current partner?</legend>
            <div class="table">
              <div class="tr">
                <div class="td"><b>Partner name</b></div>
                <div class="td">Jan Citizen</div>
              </div>
              <div class="tr">
                <div class="td"><b>Date of birth</b></div>
                <div class="td">12/04/1985</div>
              </div>
            </div>
            <div class="radio-toggle margin-above">
              <label class="on label-left" for="partnered-pre-pop--current-partner--yes">
                <input id="partnered-pre-pop--current-partner--yes" type="radio" name="partnered-pre-pop--current-partner--question">
                <span>Yes</span>
              </label>
              <label class="off label-right" for="partnered-pre-pop--current-partner--no">
                <input id="partnered-pre-pop--current-partner--no" type="radio" name="partnered-pre-pop--current-partner--question">
                <span>No</span>
              </label>
            </div>
          </div>
          <div id="partnered-pre-pop--options" class="margin-above--extra" style="display: none">
            <div class="ledger-rule"></div>
            <div class="">
              <h3>Please review the following details and update if necessary</h3>
            </div>
            <div id="partnered-pre-pop--relationship-status" class="form-group margin-above--large" style="display: block;">
              <label class="uikit-text-input__label" for="drop-down">Relationship status</label>
              <select id="ppp-relationship" class="uikit-text-input input-half" id="drop-down" name="drop-down">
                <option>-- Select one --</option>
                <option selected="selected">Married</option>
                <option>De facto</option>
              </select>
            </div>
            <div class="form-group margin-above--large" id="ppp-married-date" style="display: none;">
              <fieldset>
                <label class="uikit-text-input__label">Date of marriage
                  <span class="hint">(dd / mm / yyyy)</span>
                </label>
                <input class="uikit-text-input dd" type="text" name="enlistStartDay" maxlength="2" required aria-required="true" aria-label="2 digit day"> /
                <input class="uikit-text-input mm" type="text" name="enlistStartMonth" maxlength="2" required aria-required="true" aria-label="2 digit month"> /
                <input class="uikit-text-input yyyy" type="text" name="enlistStartYear" maxlength="4" required aria-required="true" aria-label="4 digit year">
              </fieldset>
            </div>
            <div class="form-group margin-above--large" id="sp-start-pbs">
              <legend class="legend-label ">Is your partner currently receiving, or applying for, any Centrelink payments?</legend>
              <div class="radio-toggle">
                <label class="on label-left" for="ppp--centrelink-yes">
                  <input id="ppp--centrelink-yes" type="radio" name="ppp--centrelink">
                  <span>Yes</span>
                </label>
                <label class="off label-right" for="ppp--centrelink-no">
                  <input id="ppp--centrelink-no" type="radio" name="ppp--centrelink">
                  <span>No</span>
                </label>
              </div>
              <div class="form-group margin-above--large" id="ppp--crn" style="display:none;">
                <label class="uikit-text-input__label" for="tags">What is your partner's Customer Reference Number (CRN)?</label>
                <input class="uikit-text-input" name="tags" id="tags" type="text" value="" style="max-width: 22em;">
              </div>
            </div>
          </div>
          <div id="partnered-no-longer" class="margin-above--extra" style="display: none">
            <div class="ledger-rule"></div>
            <div class="form-group" id="date-marriage">
              <fieldset>
                <label class="uikit-text-input__label">When did this relationship end?
                  <span class="hint">(dd / mm / yyyy)</span>
                </label>
                <input class="uikit-text-input dd" type="text" name="enlistStartDay" maxlength="2" required aria-required="true" aria-label="2 digit day"> /
                <input class="uikit-text-input mm" type="text" name="enlistStartMonth" maxlength="2" required aria-required="true" aria-label="2 digit month"> /
                <input class="uikit-text-input yyyy" type="text" name="enlistStartYear" maxlength="4" required aria-required="true" aria-label="4 digit year">
              </fieldset>
            </div>
          </div>
        </div>
        <div id="ppp--save-and-next" class="margin-above" style="display: none">
          <p>Choose <b>save and next</b> to continue.</p>
        </div>
      </div>
    </div>
  </div>
  <div class="container" id="single-pre-pop" style="display: none;">
    <div class="row">
      <form id="myForm">
        <div class="col-md-offset-2 col-md-8">
          <div class="margin-above--extra margin-below--extra">
            <div id="single-pre-pop--current-status" class="form-group margin-above--large">
              <legend class="legend-label">Is this your CURRENT relationship status?</legend>
              <div class="table">
                <div class="tr">
                  <div class="td"><b>Relationship status</b></div>
                  <div class="td">Divorced</div>
                </div>
              </div>
              <div class="radio-toggle margin-above">
                <label class="on label-left" for="single-pre-pop--current-status--yes">
                  <input id="single-pre-pop--current-status--yes" type="radio" value="yes" name="single-pre-pop--current-status--question">
                  <span>Yes</span>
                </label>
                <label class="off label-right" for="single-pre-pop--current-status--no">
                  <input id="single-pre-pop--current-status--no" type="radio" value="no" name="single-pre-pop--current-status--question">
                  <span>No</span>
                </label>
              </div>
            </div>
          </div>
          <div id="spp--save-and-next" class="margin-above" style="display: none">
            <p>Choose <b>save and next</b> to continue.</p>
          </div>
        </div>
      </form>
    </div>
    <% include ../../../../partials/claims-cancel-modal.ejs %>
  </div> <!-- container end -->
  <div class="row">
    <div class="col-md-offset-2 col-md-8">
      <div class="pagination">
        <button class="uikit-btn uikit-btn--tertiary" onclick="window.location.href='/auth/claim/service_pension/sp-progress-b'">Previous</button>
        <button class="uikit-btn uikit-btn--tertiary" onclick="window.location.href='#open-modal'">Cancel</button>
        <div class="floated">
          <button class="uikit-btn uikit-btn--tertiary" onclick="window.location.href='/auth/claim'">Save and exit</button>
          <!-- <button class="uikit-btn btnNext" onclick="window.location.href='/auth/claim/service_pension/sp-dependant'">Save and next</button> -->
          <button class="uikit-btn btnNext" onclick="checkSaveAndNext()">Save and next</button>
        </div>
      </div>
    </div>
  </div>
</main>
<% include ../../../../partials/footer.ejs %>
<script>
  $(Document).ready(function () {

    hideAll();

    if ( sessionStorage.getItem('dual-application') == "true" ) {
      $("#single").parent().hide();
      $("#separated").parent().hide();
      $("#divorced").parent().hide();
      $("#widowed").parent().hide();
    }

    window.checkSaveAndNext = function () {

      myNav = "/auth/claim/service_pension/sp-dependant";
      radioTest = $("#myForm input[type='radio']:checked").val();

      if ($("#myForm input[type='radio']:checked").val() == "no") {
        myNav = "cleanskin";
      }
      if ($("#partnered-no-longer").is(":visible")) {
        myNav = "cleanskin";
      }

      if (myNav == "cleanskin") {
        showScenario("cleanskin")
      } else {
        window.location.href = '/auth/claim/service_pension/sp-dependant'
      }

    }

    /* scenarios */

    $(document).keypress(function (e) {
      switch (e.which) {
        case 51: //partnered pre-pop
          showScenario("partnered-pre-pop");
          break;
        case 52: // siungle pre-pop
          showScenario("single-pre-pop");
          break;
        case 53: // siungle pre-pop
          showScenario("cleanskin");
          break;
        default:
      }
    });

    function showScenario(scenario) {
      $("#cleanskin").hide();
      $("#single-pre-pop").hide();
      $("#partnered-pre-pop").hide();
      if (scenario == "partnered-pre-pop") {
        $("#partnered-pre-pop").show();
        $("#partnered-pre-pop--options").hide();
        $("#ppp--crn").hide();
      } else if (scenario == "single-pre-pop") {
        $("#single-pre-pop").show();
      } else {
        $("#cleanskin").show();
      }
    }

    /* partnered pre pop */

    $("#partnered-pre-pop--current-partner--yes").click(function () {
      $("#partnered-pre-pop--options").show("fast");
      $("#partnered-no-longer").hide("fast");
    });
    $("#partnered-pre-pop--current-partner--no").click(function () {
      $("#partnered-pre-pop--options").hide("fast");
      $("#partnered-no-longer").show("fast");
    });

    $("#ppp--centrelink-yes").click(function () {
      $("#ppp--crn").show("fast");
    });
    $("#ppp--centrelink-no").click(function () {
      $("#ppp--crn").hide("fast");
    });

    $("#ppp-relationship").change(function () {
      if ($('#ppp-relationship :selected').val() == "Married") {
        $("#ppp-married-date").show();
      } else {
        $("#ppp-married-date").hide();
      }
    });


    /* single pre pop */

    $("#single-pre-pop--current-status--yes").click(function () {
      $("#spp--save-and-next").show("fast");
      console.log("gfgfdgfd")
    });
    $("#single-pre-pop--current-status--no").click(function () {
      $("#spp--save-and-next").show("fast");
    });

    /* cleanskin */

    $("#single").click(function () {
      hideAll();
      sessionStorage.setItem('partnerStatus', 'none');
      $("#save-and-next").show("fast");
    });

    $("#divorced").click(function () {
      hideAll();
      sessionStorage.setItem('partnerStatus', 'none');
      $("#date-divorced").show("fast");
    });

    $("#widowed").click(function () {
      hideAll();
      sessionStorage.setItem('partnerStatus', 'none');
      $("#save-and-next").show("fast");
    });

    $("#separated").click(function () {
      hideAll();
      sessionStorage.setItem('partnerStatus', 'none');
      $("#date-separation").show("fast");
    });

    $("#married").click(function () {
      hideAll();
      sessionStorage.setItem('partnerStatus', 'partnered');
      $("#date-marriage").show("fast");
      $("#partner-details").show("fast");
    });

    $("#defacto").click(function () {
      hideAll();
      sessionStorage.setItem('partnerStatus', 'partnered');
      $("#date-living-together").show("fast");
      $("#partner-details").show("fast");
    });

    /* partnered */

    /* former names */

    var other_names;
    $('input[name=other_names]').change(function () {
      other_names = $('input[name=other_names]:checked').val();
      console.log( other_names )
      if (other_names == "yes") {
        $("#former_names").show("fast");
      } else {
        $("#former_names").hide();
      }
    });


    var centrelink_selected = [];
    $("#cs_centrelink").change(function () {
      centrelink_selected = [];
      $('#cs_centrelink input:checked').each(function () {
        centrelink_selected.push($(this).attr('name'));
      });
      if (centrelink_selected.length > 0) {
        $("#cs_crn").show("fast");
      } else {
        if (cs_cshc != "yes") {
          $("#cs_crn").hide();
        }
      }
    });

    /* CSHC card question */

    var cs_cshc;
    $('input[name=cs_cshc]').change(function () {
      cs_cshc = $('input[name=cs_cshc]:checked').val();
      if (cs_cshc == "yes") {
        $("#cs_crn").show("fast");
      } else {
        if (centrelink_selected.length == 0) {
          $("#cs_crn").hide();
        }
      }
    });

    function hidePartner() {
      sessionStorage.setItem('partnerApply', 'false')
      $("#sp-res-veteranTitle").hide();
      $("#sp-res-partnerDetails").hide();
      $("#intro-copy-no-partner").show();
    }

    function hideAll() {
      $("#date-marriage").hide();
      $("#date-living-together").hide();
      $("#other-ps").hide();
      $("#date-separation").hide();
      $("#date-divorced").hide();
      $("#partner-details").hide();
      $("#crn").hide();
      $("#save-and-next").hide();
    }
  });

  //other
  $('#other').click(function () {
    if ($(this).is(':checked')) {
      $("#other-ps").show("fast");
    } else {
      $("#other-ps").hide();
    }
  });
</script>
</body>

</html>
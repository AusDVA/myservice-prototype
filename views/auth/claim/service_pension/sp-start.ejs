<!DOCTYPE html>
    <html class="js" lang="en">

<head>
    <title>Service Pension - Getting started | MyService</title>
    <% include ../../../../partials/head.ejs %>
</head>

<body class="uikit-body uikit-grid uikit-refactor">
    <noscript>
        <p role="alert">This website needs JavaScript to work properly.</p>
    </noscript>
    <nav class="uikit-skip-link">
        <a class="uikit-skip-link__link" href="#main-content">Skip to main content</a>
    </nav>
    <% include ../../../../partials/header-topbar.ejs %>
    <% include ../../../../partials/header-nom-rep.ejs %>
    <main>
        <div id="main-content" class="section-feature border-bottom--mild margin-above--none margin-below--none padding-below">
            <!-- Page heading -->
            <h1 class="margin-above--none ss-align--center">
                <span class="heading">About your claim</span>
            </h1>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-md-8 col-md-offset-2">
                    <div class="margin-above--extra margin-below--extra">
                        <!-- What are you applying for? -->
                        <% 
                            locals = {};
                            locals.question = 'What are you applying for?';
                            locals.items = ["Invalidity service pension","Age service pension"];
                            locals.icons = ["fa-user","fa-user"];
                            locals.optionalID = 'pension_type';
                            %>
                        <%- include ../../../../partials/forms/radio-with-icon.ejs %>
                        <form id="myForm">
                            <input type="reset" style="display: none;">
                            <!-- Show if <58 -->
                            <% 
                            locals = {};
                            locals.message = 'You must be at least 59 years and 9 months old to apply for age service pension.'
                            locals.optionalID = 'inval_only';
                            locals.optionalHide = true;
                            %>
                            <%- include ../../../../partials/forms/notice.ejs %>
                            <!-- Show if 65+ -->
                            <% 
                            locals = {};
                            locals.message = 'You cannot apply for invalidity service pension if you are over 65 years of age. Apply for age service pension instead.'
                            locals.optionalID = 'age_only';
                            locals.optionalHide = true;
                            %>
                            <%- include ../../../../partials/forms/notice.ejs %>
                            <!-- Invalidity -->
                            <% 
                            locals = {};
                            locals.question = 'On what grounds are you applying for Invalidity Pension?';
                            locals.items = ["Totally and permanently incapacitated (TPI) or special rate disability pension (SRDP)","Blind","Neither"];
                            locals.optionalItemID = ["tpi","blind","neither"];
                            locals.optionalItemHelp = ["Only select this option if you are entitled to disability pension at the TPI rate or Special Rate Disability Pension.","",""];
                            locals.optionalID = 'invalidity_what_grounds';
                            locals.optionalHide = true;
                            %>
                            <%- include ../../../../partials/forms/radio.ejs %>
                            <!-- If "neither" -->
                            <div class="uikit-page-alerts" role="alert" id="invalidity_neither_notice" style="display: none;">
                                <p>You will need to provide the following forms:</p>
                                <p>
                                    <a href="https://www.dva.gov.au/sites/default/files/dvaforms/D0569.pdf">Invalidity Details form (D569)</a><BR />
                                    <a href="https://www.dva.gov.au/sites/default/files/dvaforms/D0570.pdf">Work Test Questionnaire (D570)</a>
                                </p>
                                <p> Some sections will need to be completed by your doctor. You can attach the completed forms at the end of your claim.</p>
                            </div>
                            <!-- If "blind" -->
                            <div class="uikit-page-alerts" role="alert" id="invalidity_blind_notice" style="display: none;">
                                <p>You will need to obtain a report from an ophthalmologist giving details of the degree of visual impairment.</p>
                                <p>You can attach this report at the end of your claim.</p>
                            </div>
                            <!-- Who are you applying for? -->
                            <% 
                            locals = {};
                            locals.question = 'Who are you applying for?';
                            locals.items = ["Myself","Both myself and my partner"];
                            locals.icons = ["fa-user","fa-user-friends"];
                            locals.optionalID = 'pension_who';
                            locals.optionalHide = true;
                            %>
                            <%- include ../../../../partials/forms/radio-with-icon.ejs %>
                            <!-- PBS -->
                            <% 
                            locals = {};
                            locals.question = 'Are you a registered member of the Pension Bonus Scheme?'; 
                            locals.optionalID = 'pbs'; 
                            locals.optionalHide = true;
                            %>
                            <% include ../../../../partials/forms/radio--yes-no.ejs %>
                            <!-- If "yes" -->
                            <div class="uikit-page-alerts" role="alert" id="pbs_notice" style="display: none;">
                                <p>You will need to complete the following form:</p>
                                <p>
                                    <a href="https://www.dva.gov.au/sites/default/files/dvaforms/D0559.pdf">Claim for Pension Bonus form (D559)</a><BR />
                                </p>
                                <p>You can attach this form at the end of your claim.</p>
                            </div>
                            <!-- Centrelink -->
                            <% 
                            locals = {};
                            locals.question = 'Have you applied for or do you receive any of the following Centrelink payments?'; 
                            locals.items = ["Age pension","Disability support pension","Carer payment","Newstart allowance","Other"];
                            locals.optionalHint = 'Select all that apply.'; 
                            locals.optionalID = "cs_centrelink";  
                            locals.optionalHide = true;           
                            %>
                            <% include ../../../../partials/forms/checkbox.ejs %>
                            <!-- CSHC -->
                            <% 
                            locals = {};
                            locals.question = 'Have you applied for or do you currently hold a Commonwealth seniors health card (CSHC) from DVA or Centrelink?'; 
                            locals.optionalID = 'cs_cshc'; 
                            locals.optionalHide = true;
                            %>
                            <% include ../../../../partials/forms/radio--yes-no.ejs %>
                            <div style="display: none;" class="form-group margin-above--large" id="cs_crn">
                                <label class="uikit-text-input__label" for="tags">What is your Customer Reference Number (CRN)?</label>
                                <input class="uikit-text-input" name="tags" id="tags" type="text" value="" style="max-width: 22em;">
                            </div>
                            <!-- visual impairment -->
                            <% 
                            locals = {};
                            locals.question = 'Are you applying as a person who is blind or visually impaired?'; 
                            locals.hint = '(ie regarded as permanently blind in both eyes)'; 
                            locals.optionalID = 'visual_impairment'; 
                            locals.optionalHide = true;
                            %>
                            <% include ../../../../partials/forms/radio--yes-no.ejs %>
                            <div id="save_and_next" class="margin-above--extra" style="display: none">
                                <p>Choose <b>save and next</b> to continue.</p>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="pagination">
                    <button class="uikit-btn uikit-btn--tertiary" onclick="window.location.href = '/auth/claim/service_pension/sp-progress-a'">Previous</button>
                    <button class="uikit-btn uikit-btn--tertiary" onclick="window.location.href = '#open-modal'">Cancel claim</button>
                    <div class="floated">
                        <button class="uikit-btn uikit-btn--tertiary" onclick="window.location.href = '/auth/claim/service_pension/sp-start'">Save and exit</button>
                        <button class="uikit-btn btnNext" onclick="window.location.href = '/auth/claim/service_pension/sp-qs'">Save and next</button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <% include ../../../../partials/claims-cancel-modal.ejs %>
    <% include ../../../../partials/footer.ejs %>
    <div id="state-switcher">
        <h3>Page info</h3>
        <div class="review__table">
            <div class="tr">
                <div class="td"><b>Page name</b></div>
                <div class="td">About your claim</div>
            </div>
             <div class="tr">
                <div class="td"><b>Spec revision</b></div>
                <div class="td">0.13</div>
            </div>
        </div>
        <h3>Properties</h3>
         <div class="review__table">
            <div class="tr">
                <div class="td"><b>Veteran blind</b></div>
                <div class="td" id="veteran-blind">No</div>
            </div>
            <div class="tr">
                <div class="td"><b>Dual application</b></div>
                <div class="td" id="dual-application">No</div>
            </div>
        </div>
        <h3>States</h3>
        <% 
           locals = new Object();
           locals.question = 'User age:';
           locals.items = ["Under 59.75","Between 59.75 and 65","Over 65"];
           locals.optionalID = 'state-switcher--age';
           locals.optionalHide = false;
           locals.optionalHint = false;
        %>
        <%- include ../../../../partials/forms/radio.ejs %>
    </div>
    <script>
    $(Document).ready(function() {

        /* State switcher */

        var userStatus = "single-account";
        if (userStatus == "single-account") {
            $("#user-status--single-account").click();
        }

        $(document).keypress(function(e) {
            switch (e.which) {
                case 96: //tilda
                    $('#state-switcher').toggle();
                    break;
                default:
            }
        });

        $('input[type=radio][name=state-switcher--age]').change(function() {
            sessionStorage.setItem('sp-age', this.value);
            console.log( this.value )
            switch (this.value) {
                case "under-59.75":
                    break;
                case "between-59.75-and-65":
                    break;
                case "over-65":
                    break;
                default:
            }
            setUpAgeMode();
        });
        $(":radio[value=over-65]").click();

        /* End state switcher */

        /* Select pension type */

        $("#pension_type").change(function() {
            var mySelection = $('input[name=pension_type]:checked').val();
            hideAll();
            $("#myForm").trigger("reset");
            switch (mySelection) {
                case "invalidity_service_pension":
                    $("#invalidity_what_grounds").show("fast");
                    $("#pbs").show("fast");
                    break;
                case "age_service_pension":
                    $("#pension_who").show("fast");
                    $("#pbs").show("fast");
                    $("#cs_centrelink").show("fast");
                    $("#cs_cshc").show("fast");
                    $("#visual_impairment").show("fast");
                    break;
                default:
                    break;
            }
        });

        /* If selected invalidity ask about grounds */

        $("#invalidity_what_grounds").change(function() {
            var mySelection = $('input[name=invalidity_what_grounds]:checked').val();
            $("#invalidity_blind_notice").hide();
            $("#invalidity_neither_notice").hide();
            sessionStorage.setItem('veteran-blind', 'false');
            $("#veteran-blind").html("No");
            switch (mySelection) {
                case "tpi":
                    $("#visual_impairment").show("fast");
                    break;
                case "blind":
                    $("#invalidity_blind_notice").show("fast");
                    sessionStorage.setItem('veteran-blind', 'true');
                    $("#veteran-blind").html("Yes");
                    $("#visual_impairment").hide("fast");
                    break;
                case "neither":
                    $("#invalidity_neither_notice").show("fast");
                    $("#visual_impairment").show("fast");
                    break;
                default:
            }
        });

        /* If selected age pension ask about dual application */

        $("#pension_who").change(function() {
            var mySelection = $('input[name=pension_who]:checked').val();
            switch (mySelection) {
                case "myself":
                    sessionStorage.setItem('dual-application', 'false');
                    $("#dual-application").html("No");
                    break;
                case "both_myself_and_my_partner":
                    sessionStorage.setItem('dual-application', 'true');
                    $("#dual-application").html("Yes");
                    break;
                default:
                    break;
            }
        });

        /* Pension bonus scheme */

        $("#pbs-yes").click(function() {
            $("#pbs_notice").show("fast");
        });
        $("#pbs-no").click(function() {
            $("#pbs_notice").hide("fast");
        });

        /* Centrelink questions */

        var centrelink_selected = [];
        $("#cs_centrelink").change(function() {
            centrelink_selected = [];
            $('#cs_centrelink input:checked').each(function() {
                centrelink_selected.push($(this).attr('name'));
            });
            if (centrelink_selected.length > 0) {
                $("#cs_crn").show("fast");
            } else {
                if (cs_cshc != "yes") {
                    $("#cs_crn").hide();
                }
            }
        });

        /* CSHC card question */

        var cs_cshc;
        $('input[name=cs_cshc]').change(function() {
            cs_cshc = $('input[name=cs_cshc]:checked').attr('id');
            if (cs_cshc == "cs_cshc-yes") {
                $("#cs_crn").show();
            } else {
                if (centrelink_selected.length == 0) {
                    $("#cs_crn").hide();
                }
            }
        });
        if (centrelink_selected.length > 0) {
            $("#cs_crn").show("fast");
        } else {
            if (cs_cshc != "yes") {
                $("#cs_crn").hide();
            }
        }

        /* visual impairment question */

        $('input[name=visual_impairment]').change(function() {
            mySelection = $('input[name=visual_impairment]:checked').val();
            if (mySelection == "yes") {
                sessionStorage.setItem('veteran-blind', 'true');
                $("#veteran-blind").html("Yes");
            } else {
                sessionStorage.setItem('veteran-blind', 'false');
                $("#veteran-blind").html("No");
            }
        });

        /* Utilities */

        function hideAll() {
            $("#inval_only").hide();
            $("#age_only").hide();
            $("#invalidity_what_grounds").hide();
            $("#invalidity_neither_notice").hide();
            $("#invalidity_blind_notice").hide();
            $("#pension_who").hide();
            $("#pbs").hide();
            $("#pbs_notice").hide();
            $("#cs_centrelink").hide();
            $("#cs_cshc").hide();
            $("#cs_crn").hide();
            $("#visual_impairment").hide();
            $("#save_and_next").hide();
        }

        function setUpAgeMode() {
            hideAll();
            // $("#pension_type").hide();

            switch (sessionStorage.getItem('sp-age')) {
                case "under-59.75":
                    $("#pension_type").show();
                     console.log("dsfdsfdsfsd")
                    break;
                case "between-59.75-and-65":
                    $("#pension_type").show();
                    break;
                case "over-65":
                    $("#pension_type").hide();
                    $("#pension_who").show();
                    break;
                default:
                    break;
            }
        };

    });
    </script>
</body>

</html>
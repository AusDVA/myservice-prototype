<!DOCTYPE html>
<html class="js" lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width" name="viewport">
    <title>Service history - about your claim | MyService</title>
    <link href="docs/css/main.css" rel="stylesheet">
    <link rel="stylesheet" href="/src/font/fontawesome/css/all.css">
</head>

<body class="uikit-body uikit-grid uikit-refactor">
    <noscript>
        <p role="alert">This website needs JavaScript to work properly.</p>
    </noscript>
    <nav class="uikit-skip-link">
        <a class="uikit-skip-link__link" href="#main-content">Skip to main content</a>
    </nav>
    <% include ../../../global/partials/header-topbar.ejs %>
    <% include ../../../global/partials/header-nom-rep.ejs %>
    <main>
        <div id="main-content" class="section-feature border-bottom--mild margin-above--none margin-below--none padding-below">
            <!-- Page heading -->
            <h1 class="margin-above--none ss-align--center">
                <span class="heading">About your claim</span>
            </h1>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-md-offset-2 col-md-8 ">
                    <div class="margin-above--extra margin-below--extra">
                        <!-- <form id="myForm" novalidate> -->
                        <!-- <input type="reset" style="display:none"> -->
                        <div id="alert-no-danger" style="display: none;" class="uikit-page-alerts uikit-page-alerts--error" role="alert">
                            <span class="uikit-display-1">You need to add at least one conflict to proceed with your claim.</span>
                        </div>
                        <!-- start incurred danger -->
                        <div id="incident-message">
                            <h2 class="margin-below--none margin-above--large">Tell us about any incidents of incurred danger.</h2>
                            <p>Add an incident of direct incurred danger from hostile forces to proceed with the claim.
                            </p>
                        </div>
                        <button class="uikit-btn uikit-btn--primary" id="addIncident">Add incident</button>
                        <div style="display: none;" class="review__content--item boxed margin-above" id="summary-1">
                            <div class="review__content--label margin-below">
                                <h2 class="margin-above--none" style="display: inline-block;">
                                    <span class="fal fa-map-marker-alt fa-icons"></span>
                                    <span class="font-weight-heavy">Incurred danger incident</span>
                                </h2>
                                <button class="uikit-btn uikit-btn--tertiary small floated" onClick="editCard('boarders-and-lodgers');">&nbsp;Edit&nbsp;</button>
                            </div>
                            <div class="review__table">
                                <div class="tr">
                                    <div class="td"><b>Start date</b></div>
                                    <div class="td">05/08/1968</div>
                                </div>
                                <div class="tr">
                                    <div class="td"><b>End date</b></div>
                                    <div class="td">05/08/1968</div>
                                </div>
                                <div class="tr">
                                    <div class="td"><b>Place</b></div>
                                    <div class="td">Vietnam</div>
                                </div>
                                <div class="tr">
                                    <div class="td"><b>Description</b></div>
                                    <div class="td">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam.</div>
                                </div>
                            </div>
                        </div>
                        <div style="display: none;" class="review__content--item boxed margin-above" id="summary-2">
                            <div class="review__content--label margin-below">
                                <h2 class="margin-above--none" style="display: inline-block;">
                                    <span class="fal fa-map-marker-alt fa-icons"></span>
                                    <span class="font-weight-heavy">Incurred danger incident</span>
                                </h2>
                                <button class="uikit-btn uikit-btn--tertiary small floated" onClick="editCard('boarders-and-lodgers');">&nbsp;Edit&nbsp;</button>
                            </div>
                            <div class="review__table">
                                <div class="tr">
                                    <div class="td"><b>Start date</b></div>
                                    <div class="td">05/08/1968</div>
                                </div>
                                <div class="tr">
                                    <div class="td"><b>End date</b></div>
                                    <div class="td">05/08/1968</div>
                                </div>
                                <div class="tr">
                                    <div class="td"><b>Place</b></div>
                                    <div class="td">Vietnam</div>
                                </div>
                                <div class="tr">
                                    <div class="td"><b>Description</b></div>
                                    <div class="td">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam.</div>
                                </div>
                            </div>
                        </div>
                        <div style="display: none;" class="row" id="addAnotherIncidentWrapper">
                            <div class="col-sm-12 margin-above ss-align--center">
                                <button class="uikit-btn uikit-btn--tertiary" id="addAnotherIncident">Add another incident</button>
                            </div>
                        </div>
                        <!-- open card -->
                        <div class="form-group margin-above">
                            <div style="display: none;" class="boxed" id="incident-details">
                                <h2 class="margin-above--none" style="display: inline-block;">
                                    <span class="fal fa-map-marker-alt fa-icons"></span><span class="font-weight-heavy">Incident of incurred danger</span>
                                </h2>
                                <div class="form-group margin-above--large">
                                    <label class="uikit-text-input__label" for="date">Start date
                                        <span class="hint">(mm / yyyy)</span>
                                    </label>
                                    <input class="uikit-text-input mm" type="text" name="mm-date" id="mm-date" maxlength="2" required aria-required="true" aria-label="2 digit month" /> /
                                    <input class="uikit-text-input yyyy" type="text" name="yyyy-date" id="yyyy-date" maxlength="4" required aria-required="true" aria-label="4 digit year" />
                                </div>
                                <div class="form-group margin-above--large">
                                    <label class="uikit-text-input__label" for="date">End date
                                        <span class="hint">(mm / yyyy)</span>
                                    </label>
                                    <input class="uikit-text-input mm" type="text" name="mm-date" id="mm-date" maxlength="2" required aria-required="true" aria-label="2 digit month" /> /
                                    <input class="uikit-text-input yyyy" type="text" name="yyyy-date" id="yyyy-date" maxlength="4" required aria-required="true" aria-label="4 digit year" />
                                </div>
                                <div class="form-group margin-above--large">
                                    <label class="uikit-text-input__label" for="Input field">Location</label>
                                    <input class="uikit-text-input input-half" name="service_number" id="service_number" type="text" />
                                </div>
                                <div class="form-group margin-above--large">
                                    <label class="uikit-text-input__label" for="textArea">Incident details<br>
                                        <span class="hint">Describe the nature of the enemy activity and your role at the time.</span>
                                    </label>
                                    <textarea id="textArea" name="textArea" rows="3"></textarea>
                                </div>
                                <hr />
                                <div class="form-group margin-above--none">
                                    <button id="danger-period-save" class="uikit-btn">
                                        &nbsp;&nbsp;&nbsp; Save &nbsp;&nbsp;&nbsp;
                                    </button>
                                    &nbsp;<button id="danger-period-cancel" class="uikit-btn uikit-btn--tertiary">
                                        &nbsp;&nbsp;&nbsp; Cancel &nbsp;&nbsp;&nbsp;
                                    </button>
                                </div>
                            </div>
                        </div>
                        <!-- end incurred danger -->
                    </div>
                </div>
                <!-- col-md-12 end -->
                <div class="pagination">
                    <button class="uikit-btn uikit-btn--tertiary" onclick="window.location.href = '/claims'">Previous</button>
                    <button class="uikit-btn uikit-btn--tertiary" onclick="window.location.href = '#open-modal'">Cancel claim</button>
                    <div class="floated">
                        <button id="save-and-exit-button" class="uikit-btn uikit-btn--tertiary" onclick="window.location.href = '/claims'">Save and exit</button>
                        <button id="save-and-next-button" class="uikit-btn btnNext" onclick="checkSaveAndNext()">Save and next</button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <% include ../partials/cancel-modal.ejs %>
    <% include ../../../global/partials/footer.ejs %>
</body>
<script>
$(Document).ready(function() {

    // former name

    var formerNames = false;
    $("#former_yes").click(function() {
        $("#former_name").show("fast");
        $("#save-and-next").hide();
        formerNames = true;
    });
    $("#former_no").click(function() {
        $("#former_name").hide("fast");
        $("#save-and-next").hide();
    });
    $("#removeDateRow").click(function() {
        $(this).closest('tr').remove();
    });

    function cloneMe() {
        var newOne = $('#date-template').clone(true)
            .find("input:text").val("").end();
        $("#removeDateRow").show();
        newOne.insertAfter($('#date-template'));
    }

    /* Conflicts */

    // clicks add conflict

    $("#addConflict").click(function() {
        hideAll();
        $("#conflict-details").show("fast");
        $("#addConflict").hide();
    });

    // clicks add another incident

    $("#addAnotherConflict").click(function() {
        hideAll();
        $("#conflict-details").show("fast");
    });

    // clicks save incident

    var conflictsAdded = 0;
    $("#conflict-save").click(function() {
        $("body,html").animate({
                scrollTop: 0
            },
            700
        );
        hideAll();
        $("#addAnotherConflictWrapper").show("fast");
        if (conflictsAdded == 0) {
            $("#conflict-summary-1").show("fast");
        }
        if (conflictsAdded == 1) {
            $("#conflict-summary-1").show("fast");
            $("#conflict-summary-2").show("fast");
        }
        conflictsAdded++;
        restoreBaseUI();
    });

    /* Incurred danger */

    // clicks add incident

    $("#addIncident").click(function() {
        hideAll();
        $("#incident-details").show("fast");
        $("#addIncident").hide();
    });

    // clicks add another incident

    $("#addAnotherIncident").click(function() {
        hideAll();
        $("#incident-details").show("fast");
    });

    // clicks save incident

    var incidentsAdded = 0;
    $("#danger-period-save").click(function() {
        $("body,html").animate({
                scrollTop: 0
            },
            700
        );
        hideAll();
        $("#addAnotherIncidentWrapper").show("fast");
        incidentsAdded++;
        restoreBaseUI();
    });

    function hideAll() {

        // names

        $("#former_name").hide();
        $("#former_name_question").hide();

        // incurrend danger
        $("#incident-message").hide();
        $("#addIncident").hide();
        $("#addAnotherIncidentWrapper").hide();
        $("#summary-1").hide();
        $("#summary-2").hide();
        $("#incident-details").hide();

        // conflict
        $("#conflict-message").hide();
        $("#addConflict").hide();
        $("#addAnotherConflictWrapper").hide();
        $("#conflict-summary-1").hide();
        $("#conflict-summary-2").hide();
        $("#conflict-details").hide();

         $("#alert-no-danger").hide();

    }

    function restoreBaseUI() {

        if (formerNames) $("#former_name").show();
        $("#former_name_question").show();

        $("#conflict-message").show();
        if (conflictsAdded == 0) {
            $("#addConflict").show();
        }
        if (conflictsAdded == 1) {
            $("#conflict-summary-1").show("fast");
            $("#addAnotherConflictWrapper").show();
        }
        if (conflictsAdded >= 2) {
            $("#conflict-summary-1").show("fast");
            $("#conflict-summary-2").show("fast");
            $("#addAnotherConflictWrapper").show();
        }

        $("#incident-message").show();
        if (incidentsAdded == 0) {
            $("#addIncident").show();
        }
        if (incidentsAdded == 1) {
            $("#summary-1").show("fast");
            $("#addAnotherIncidentWrapper").show();
        }
        if (incidentsAdded >= 2) {
            $("#summary-1").show("fast");
            $("#summary-2").show("fast");
            $("#addAnotherIncidentWrapper").show();
        }

    }

    window.checkSaveAndNext = function() {
        if (incidentsAdded == 0) {
            $("#alert-no-danger").show("fast");
            $("body,html").animate({
                    scrollTop: 0
                },
                700
            );
            return;
        }
        myNav = "/civilian-qs-review";
        window.location.href = myNav;
    }
});
</script>

<body>

</html>
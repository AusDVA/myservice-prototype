<!DOCTYPE html>
<html class="js" lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width" name="viewport">
  <title>Manage your Claims | MyService</title>
  <link href="docs/css/main.css" rel="stylesheet">
</head>

<body class="uikit-body uikit-grid uikit-refactor">
  <noscript>
    <p role="alert">This website needs JavaScript to work properly.</p>
  </noscript>
  <nav class="uikit-skip-link">
    <a class="uikit-skip-link__link" href="#main-content">Skip to main content</a>
  </nav>
  <% include ../../../global/partials/header-topbar.ejs %>
  <% include ../../../global/partials/header-claims.ejs %>
  <main>
    <section>
      <div class="section-feature">
        <div class="container" id="main-content">

          <h1 class="margin-below--small ss-align--center margin-above--small">
            <span class="heading">Lump sum advance</span>
          </h1>
        </div>
      </div>

      <div class="section-feature--separator">
        <div class="container">
        </div>
      </div>

      <div class="container margin-above margin-below--extra" id="claim-activity">
        <h3 class="margin-below">
          <span class="font-weight-heavy">
            Receive part of your pension paid in advance through a <a target="_blank" href="https://www.dva.gov.au/factsheet-is115-lump-sum-advance">lump sum advance</a>
            payment.</span>
        </h3>

        <div class="uikit-page-alerts uikit-page-alerts--warning" role="alert">
          <h3>You have reached the maximum lump sum amount.</h3>
          <p>Some text here.</p>

        </div>

        <div class="currency-box margin-below--extra">
          <p>Minimum amount : <strong>$432.50 </strong> <br>
            Maximum amount : <strong>$1250.50</strong></p>
        </div>





        <div class="form-group">
          <div id="validation" class="field">
            <label class="uikit-text-input__label">
              How much do you want to request as a lump sum?
              <span class="input-error-message">Amount needs to be inbetween Min and Max amount</span>
            </label>
            <span class="input-support-text">$</span>
            <input id="ddlTechnolgy" name="Technology" class="amount uikit-text-input input-half ng-invalid ng-dirty ng-touched" type="text">
            <button class="uikit-btn uikit-btn--tertiary" id="enter-max">Enter maximum</button>
          </div>
        </div>
        <div class=" margin-above margin-below--extra" id="claim-activity">
          <section>

            <div class="form-group">
              <p style="display:none;">You will receive $<span class="hint" id="total"></span> less now</p>
            </div>
          </section>
          <div style="display:none;" class="newPensionAmountBox" id="newPensionAmount">


            <div class="row">
              <div class="col-md-7">
                <span class="hint">Current pension per fortnight</span> </div>
              <div class="col-md-5">
                <legend class="legend-label">
                  <input class="current" type="hidden" value="640.45" readonly>
                  <strong>
                    $640.45</strong>
                </legend>
              </div>
            </div>

            <div class="row" style="margin-top:10px;">
              <div class="col-md-7">
                <span class="hint">New pension per fortnight</span> </div>
              <div class="col-md-5">
                <legend class="legend-label" id="newAmount" name="new-amount"></legend>
              </div>
            </div>

            <div class="row" style="margin-top:10px;">
              <div class="col-md-7">
                <span class="hint">Difference per fortnight</span> </div>
              <div class="col-md-5">
                <legend class="legend-label" id="differenceAmount" name="difference-amount"></legend>
              </div>
            </div>
          </div>
        </div>
        <div class="pagination">
          <button class="uikit-btn uikit-btn--tertiary" onclick="window.location.href = '/payments'">Back to payments</button>
          <div class="floated">
            <input class="uikit-btn btnNext" type="button" id="btnQueryString" value="Save and review" />
          </div>
        </div>

  </main>
  <% include ../../../global/partials/footer.ejs %>
  <!-- focusout -->
  <script>
    $(".amount").each(function () {
      $(this).keyup(function () {
        Calculate();
      });
    });

    function Calculate() {
      var total = 0;
      var minTotal = $("#minTotal").html();
      var maxTotal = $("#maxTotal").html();
      var validation = ("#validation");
      $(".amount").each(function () {

        // validate
        if (!isNaN(this.value) && this.value.length != 0) {
          total += parseFloat(this.value);
          newAmount += parseFloat(this.value);
        }
        if (total < minTotal || total > maxTotal || total == "") {
          $("#newPensionAmount").hide();
        } else {
          $("#newPensionAmount").show();
        }
      });
      var cost = total / 13;
      $("#total").html(cost.toFixed(2));

      var newcost = $(".current").val() - cost.toFixed(0);
      $("#newAmount").html('<strong>$' + newcost + '</strong>');


      var difference = +(640 - newcost).toFixed(2);

      $("#differenceAmount").html(' <strong>$' + difference + '</strong> ');
    }

    $(function () {
      $("#btnQueryString").bind("click", function () {
        var url = "lump-sum-advance-review?name=" + encodeURIComponent($("#newAmount").html()) + "&technology=" + encodeURIComponent($("#ddlTechnolgy").val());
        window.location.href = url;
      });

      $("#enter-max").click(function () {
        $("#ddlTechnolgy").val('1250.50');
        Calculate();
      });


    });
  </script>
</body>


</html>
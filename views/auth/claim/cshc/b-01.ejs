<%- include(templates+"header", {
  claim: "Commonwealth Seniors Health Card",
  heading: "Income details"
}) %>

  
  
  <p class="margin-above">The income details you provide can be for either of the
      2 financial years before the current financial year. They
      should be the most recent verifiable details. You <span class="couple">and
      your partner</span> must provide income details for the same
      financial year.</p>
  <hr>

  <%- include(forms+"button_radio", {
    label: "For which financial year are you providing income details?",
    all_toggle: "#income-source-container",
    id: "year",
    boxes: [
      "2017 - 2018",
      "2018 - 2019"
    ]
  }) %>

  <form  class="resetForm" >

      <input type="reset" hidden>

      <%- include(partials+"components/form-partials/yes_no", {
        label: "Did you submit a tax return for the selected year?",
        id: "income-source",
        yes_toggle: "#taxable-income-container",
        no_toggle: "#low-income-container",
        all_toggle: ["#your-income","#myForm"],
        modifiers: ["hidden"]
      }); %>

</form>

  <h2 id="your-income" hidden><span class="font-weight-heavy">Your income</span></h2>

  <form id="myForm" class="resetForm" hidden>

      <input type="reset" style="display:none">

      <%- include(forms+"text", {
        customClass: "income",
        label: "Declared taxable income for <span class='inject-date'></span>",
        hint: "Enter your taxable income from your Notice of Assessment",
        id: "taxable-income",
        modifiers: ["inputShort", "dollarSign", "hiddenss", "hintNewLine"]
      }) %>
      <%- include(forms+"text", {
        customClass: "income",
        label: "Estimated taxable income for <span class='inject-date'></span>",
        hint: "Enter your estimated taxable income",
        id: "low-income",
        modifiers: ["inputShort", "dollarSign", "hiddenss", "hintNewLine"]
      }) %>

  <%- include(forms+"text", {
    customClass: "income",
    label: "Value of employer provided fringe benefits above $1,000",
    hint: "For example, private use of a car, assistance with accomodation or rent",
    modifiers: ["inputShort", "dollarSign", "hintNewLine"]
  }) %>

  <%- include(forms+"text", {
    customClass: "income",
    label: "Income from sources outside Australia on which you do not have to pay Australian income tax",
    hint: "Provide the amount in Australian dollars",
    modifiers: ["inputShort", "dollarSign", "hintNewLine"]
  }) %>

  <%- include(forms+"text", {
    customClass: "income",
    label: "Loss from financial investments",
    hint: "This amount must be added even though it is a loss",
    modifiers: ["inputShort", "dollarSign", "hintNewLine"]
  }) %>

  <%- include(forms+"text", {
    customClass: "income",
    label: "Loss from rental properties",
    hint: "This amount must be added even though it is a loss",
    modifiers: ["inputShort", "dollarSign", "hintNewLine"]
  }) %>

  <%- include(forms+"text", {
    customClass: "income",
    label: "Reportable superannuation contributions",
    hint: "These are reportable employer contributions (as shown on your payment summary) and any personal deductible superannuation contributions",
    modifiers: ["inputShort", "dollarSign", "hintNewLine"]
  }) %>

  <h2 class="margin-below--large">Your total: <b>$<span id="total-income">0.00</span></b></h2>

  <hr>

  <h2 id="your-income" hidden><span class="font-weight-heavy">Partner income</span></h2>

  <%- include(forms+"radio", {
    label: "Partner's income details from:",
    all_toggle: "#myForm-partner",
    boxes: [
      {
        text: "Tax Notice of Assessment / Tax return",
        toggle: "#partner-taxable-income-container",
      },
      {
        text: "Personal records (income was too low to require a tax return)",
        toggle: "#partner-low-income-container"
      }
    ],
    id: "income-source"
  }) %>

  <%- include(forms+"text", {
    customClass: "income",
    label: "Partner taxable income",
    hint: "Enter your partner's taxable income from your Notice of Assessment",
    id: "partner-taxable-income",
    modifiers: ["inputShort", "dollarSign", "hidden", "hintNewLine"]
  }) %>
  <%- include(forms+"text", {
    customClass: "income",
    label: "Partner taxable income",
    hint: "Enter your partner's taxable income",
    id: "partner-low-income",
    modifiers: ["inputShort", "dollarSign", "hidden", "hintNewLine"]
  }) %>

  <form id="myForm-partner" class="resetForm" hidden>

      <input type="reset" style="display:none">

 

  <%- include(forms+"text", {
    customClass: "income",
    label: "Value of employer provided fringe benefits above $1,000",
    hint: "For example, private use of a car, assistance with accomodation or rent",
    modifiers: ["inputShort", "dollarSign", "hintNewLine"]
  }) %>

  <%- include(forms+"text", {
    customClass: "income",
    label: "Income from sources outside Australia on which you do not have to pay Australian income tax",
    hint: "Provide the amount in Australian dollars",
    modifiers: ["inputShort", "dollarSign", "hintNewLine"]
  }) %>

  <%- include(forms+"text", {
    customClass: "income",
    label: "Loss from financial investments",
    hint: "This amount must be added even though it is a loss",
    modifiers: ["inputShort", "dollarSign", "hintNewLine"]
  }) %>

  <%- include(forms+"text", {
    customClass: "income",
    label: "Loss from rental properties",
    hint: "This amount must be added even though it is a loss",
    modifiers: ["inputShort", "dollarSign", "hintNewLine"]
  }) %>

  <%- include(forms+"text", {
    customClass: "income",
    label: "Reportable superannuation contributions",
    hint: "These are reportable employer contributions (as shown on your payment summary) and any personal deductible superannuation contributions",
    modifiers: ["inputShort", "dollarSign", "hintNewLine"]
  }) %>


  <h2 class="margin-below--large">Partner total: <b>$<span id="total-income">0.00</span></b></h2>
<hr>
  <h2 class="margin-below--large">Combined total: <b>$<span id="total-income">0.00</span></b></h2>

</form>

  <%- include(forms+"pagination", {
    pagination: [
      {
        link: "/auth/claim/cshc/prog-03",
        text: "Previous"
      },
      {
        link: "#claim-cancel-modal",
        text: "Cancel claim"
      },
      {
        link: "/auth/claim",
        text: "Save and exit",
        modifiers: ["floated"]
      },
      {
        link: "/auth/claim/cshc/b-02",
        text: "Save and next",
        modifiers: ["floated", "primary"]
      }
    ]
  }) %>

<%- include(forms+"modals/claim-cancel") %>

<script>

$("input:radio").prop("checked", false);

$("#year-container").on("change", "input", function() {
  $(".resetForm").trigger("reset");
  var mySelection = $(this).parent().find("span").text();
  $(".inject-date").text(mySelection);
})


  $(".income").on("keyup", "input", function() {
    var income = 0.00;

    $(".income").each(function(index, elem) {
      if ($(this).find("input").val() !== "" && typeof parseFloat($(this).find("input").val()) === "number") {
        income += parseFloat($(this).find("input").val())
      }
    })

    $("#total-income").text(income.toFixed((2)))
  })
</script>

<%- include(templates+"footer") %>

<%- include("state-switcher") %>
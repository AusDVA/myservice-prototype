<!DOCTYPE html>
<html class="js" lang="en">

<head>
  <title>Home | MyService</title>
  <% include ../../partials/head.ejs %>
</head>

<body class="uikit-body uikit-grid uikit-refactor">
  <noscript>
    <p role="alert">This website needs JavaScript to work properly.</p>
  </noscript>
  <nav class="uikit-skip-link">
    <a class="uikit-skip-link__link" href="#main-content">Skip to main content</a>
  </nav>
  <% include  ../../partials/header-topbar %>
    <% include ../../partials/header-authenticated.ejs %>
      <% include ../../partials/header-nom-rep.ejs %>
        <main>
          <div class="authenticated-home">
            <section>
              <div class="container margin-above--large margin-below" style="margin-top: 38px;">
                <h1 class="ss-align--center"> <span style="font-size: 24px;">
                    <span id="lblGreetings"></span> <span class="pt-current-user-name-full"></span></span></h1>
                <div id="first-login-message" style="background-color: #D8D8D8; border: 1px solid #dddddd; height: 160px; margin-top: 10px;">Welcome message</div>
                <!-- <div id="update-message" style="background-color: #D8D8D8; border: 1px solid #dddddd; height: 160px; margin-top: 10px;">Update message</div> -->
                <!-- Claims -->
                <% 
                  locals = {};     
                  locals.body_text_incomplete = " incomplete claims";
                  locals.body_text_submitted = " submitted claims";
                  locals.button_text = "View claims";
                  locals.link = "/auth/claim/claim1";
                %>
                  <%- include ../../partials/widget-tile-claim.ejs %>

                    <!-- Task -->
                    <% 
                  locals = {};
                  locals.body_text_task = " tasks";
                  locals.button_text = "View tasks";
                  locals.link = "/auth/claim/claim1";
                %>
                      <%- include ../../partials/widget-tile-task.ejs %>

                        <!-- Payments received -->
                        <% 
                  locals = {};
                  locals.body_text_payment_date = "Paid on the 24/08/2019";
                  locals.body_text_payment_amount = "$256.76";
                  locals.button_text = "View payments";
                  locals.link = "/auth/claim/claim1";
                %>
                          <%- include ../../partials/widget-tile-payment.ejs %>

                            <!-- Profile update -->
                            <% 
                  locals = {};

                  locals.body_text_profile = "Update your profile";
                  locals.button_text = "View profile";
                  locals.link = "/auth/profile";
                %>
                              <%- include ../../partials/widget-tile-profile.ejs %>

            </section>
            </div>

            <section id="claim-options">
              <div class="container" style="margin-top: 28px;" id="claims-tiles">
                <h2 class="ss-align--center"><span style="font-size: 24px;">Claims &amp; applications</span></h2>
                <div class="flex-container flex-container--wrap hover-container" style="margin: 0;">

                  <% 
                  locals = {};
                  locals.title = "Initial Liability";
                  locals.body_text = "Your first step towards treatment and support for a service-related injury or condition.";
                  locals.button_text = "Get started";
                  locals.link = "/auth/claim/claim1";
                %>
                    <%- include ../../partials/claim-tile.ejs %>

                      <% 
                  locals = {};
                  locals.title = "Mental health treatment";
                  locals.body_text = "Access free mental health treatment.";
                  locals.button_text = "Get started";
                  locals.link = "/auth/claim/health-card0";
                %>
                        <%- include ../../partials/claim-tile.ejs %>

                          <% 
                  locals = {};
                  locals.title = "Australian Defence Veterans' Covenant";
                  locals.body_text = "Apply for the Australian Defence Veterans' Covenant.";
                  locals.button_text = "Get started";
                  locals.link = "/auth/claim/veterancard/veteran-card-start";
                %>
                            <%- include ../../partials/claim-tile.ejs %>

                              <% 
                  locals = {};
                  locals.title = "Incapacity Payments";
                  locals.body_text = "Get compensated for your inability or reduced ability to work because of a service injury or condition.";
                  locals.button_text = "Get started";
                  locals.link = "/auth/claim/incap-progress";
                %>
                                <%- include ../../partials/claim-tile.ejs %>

                                  <% 
                  locals = {};
                  locals.title = "Increase your disability pension (AFI)";
                  locals.body_text = "Apply for a payment increase to your disability pension.";
                  locals.button_text = "Get started";
                  locals.link = "/auth/claim/afi-start";
                %>
                                    <%- include ../../partials/claim-tile.ejs %>

                                      <% 
                  locals = {};
                  locals.title = "Education assistance";
                  locals.body_text = "Apply for assitance with the cost of education for children of eligible veterans.";
                  locals.button_text = "Get started";
                  locals.link = "/auth/claim/studentpreeligibility?flow=veteranFlow";
                %>
                                        <%- include ../../partials/claim-tile.ejs %>

                                          <% 

                  locals = {};
                  locals.title = "Qualifying service";
                  locals.body_text = "Submit a claim to determine if you have qualifying service.";
                  locals.button_text = "Get started";
                  locals.link = "/auth/claim/qualifying_service/qs-1";
                %>
                                            <%- include ../../partials/claim-tile.ejs %>

                                              <% 
                  locals = {};
                  locals.title = "Service Pension";
                  locals.body_text = "Apply for age or invalidity service pension.";
                  locals.button_text = "Get started";
                  locals.link = "/auth/claim/service_pension/sp-progress-a";
                %>
                                                <%- include ../../partials/claim-tile.ejs %>

                                                  <% 
                  locals = {};
                  locals.title = "Partner pension";
                  locals.body_text = "Apply for partner service pension.";
                  locals.button_text = "Get started";
                  locals.link = "/auth/claim/service_pension/sp-progress-a";
                %>
                                                    <%- include ../../partials/claim-tile.ejs %>

                                                      <%#
                  locals = {};
                  locals.title = "Civilian qualifying service";
                  locals.body_text = "Submit a claim to determine if you have qualifying service.";
                  locals.button_text = "Get started";
                  locals.link = "/auth/claim/qualifying_service/civilian-qs-1";
                %>
                                                        <%#- include ../../partials/claim-tile.ejs %>

                                                          <% 
                  locals = {};
                  locals.title = "Lump sum advance";
                  locals.body_text = "Request a lump sum advance payment.";
                  locals.button_text = "Get started";
                  locals.link = "/auth/claim/lump-sum-advance-request";
                %>
                                                            <%- include ../../partials/claim-tile.ejs %>

                                                              <% 
                  locals = {};
                  locals.title = "Representation";
                  locals.body_text = "Allows someone to represent you or you can help someone in dealing with DVA matters.";
                  locals.button_text = "Get started";
                  locals.link = "/auth/profile/nomrep";
                %>
                                                                <%- include ../../partials/claim-tile.ejs %>

                                                                  <% 
                  locals = {};
                  locals.title = "DHOAS subsidy certificate";
                  locals.body_text = "Apply for a subsidy on the interest of your home loan.";
                  locals.button_text = "Get started";
                  locals.link = "/auth/claim/dhoas-start";
                %>
                                                                    <%- include ../../partials/claim-tile.ejs %>

                                                                      <% 
                  locals = {};
                  locals.title = "Defence Service Home Insurance Scheme";
                  locals.body_text = "Apply for home, contents and other insurance policies.";
                  locals.button_text = "<span class='external-link hover-none'>Defence Service Homes website</span>";
                  locals.link = "http://www.dsh.gov.au/insurance";
                %>
                                                                        <%- include ../../partials/claim-tile.ejs %>

                </div>
              </div>
            </section>

        </main>
        <div id="state-switcher">
          <h3>User selected properties</h3>
          <div class="review__table">
            <div class="tr">
              <div class="ss-box"><input id="text-input-incomplete" class="uikit-text-input ss" type="text" maxlength="2" name="numWidgets"></div>
              <div class="ss-text">Incomplete claims</div>
            </div>
            <div class="tr">
              <div class="ss-box"><input id="text-input-submitted" class="uikit-text-input ss" type="text" maxlength="2" name="numWidgets"></div>
              <div class="ss-text">Submitted claims</div>
            </div>
            <div class="tr">
              <div class="ss-box"><input id="text-input-tasks" class="uikit-text-input ss" type="text" maxlength="2" name="numWidgets"></div>
              <div class="ss-text">Tasks</div>
            </div>
            <div class="form-group">
              <p class="uiToolKitCheckBox">
                <label class="uikit-control-input" for="payment-received">
                  <input class="uikit-control-input__input" type="checkbox" id="payment-received" name="numWidgets">
                  <span class="uikit-control-input__text">Payment received</span>
                </label>
              </p>
              <p class="uiToolKitCheckBox">
                <label class="uikit-control-input" for="service-history">
                  <input class="uikit-control-input__input" type="checkbox" id="service-history" name="numWidgets">
                  <span class="uikit-control-input__text">Service history provided</span>
                </label>
              </p>
              <hr>
               <p class="uiToolKitCheckBox">
                <label class="uikit-control-input" for="first-login">
                  <input class="uikit-control-input__input" id="first-login" type="checkbox" name="numWidgets">
                  <span class="uikit-control-input__text">First login (override)</span>
                </label>
              </p>
            </div>
          </div>
        </div>
        <% include ../../partials/footer.ejs %>
          <script>

            $(document).ready(function () {

                /* --- State switcher --- */

                /* Toggle switcher */

                $(document).keypress(function (e) {
                  switch (e.which) {
                    case 96: //tilda
                      $('#state-switcher').toggle();
                      break;
                    default:
                  }
                });

                /* Claims widget */

                var claims_incomplete = sessionStorage.getItem('claims-incomplete');
                if ( claims_incomplete == null ) claims_incomplete = 0;
                $("#text-input-incomplete").val(claims_incomplete);
                $("#text-input-incomplete").keyup(function () {
                    updateScenario();
                    sessionStorage.setItem('claims-incomplete', $("#text-input-incomplete").val());
                });

                var claims_submitted = sessionStorage.getItem('claims-submitted');
                if ( claims_submitted == null ) claims_submitted = 0;
                $("#text-input-submitted").val(claims_incomplete);
                $("#text-input-submitted").val(0);
                $("#text-input-submitted").keyup(function () {
                    updateScenario();
                    sessionStorage.setItem('claims-submitted', $("#text-input-complete").val());
                });

                /* Tasks widget */

                var tasks = sessionStorage.getItem('tasks');
                if ( tasks == null ) tasks = 0;
                $("#text-input-tasks").keyup(function () {
                    updateScenario();
                    sessionStorage.setItem('tasks', $("#text-input-tasks").val());
                });

                /* Payments widget */

                var payments_received = sessionStorage.getItem('payments_received');
                if ( payments_received == null ) payments_received = false;
                $('#payment-received').prop("checked",payments_received);
                $("#payment-received").click(function (e) {
                    updateScenario();
                    sessionStorage.setItem('payments_received', payments_received);
                });

                /* Profile widget */

                var service_history = sessionStorage.getItem('service_history');
                if ( service_history == null ) service_history = false;
                $('#service_history').prop("checked",service_history);
                $("#service-history").click(function (e) {
                    updateScenario();
                    sessionStorage.setItem('payments_received', service_history);
                });

                 /* First login */

                $("#first-login").click(function (e) {
                  updateScenario();
                });

                /* --- End State switcher --- */

                /* --- Start widgets --- */

                /* Greeting */

                function updateGreeting(){
                  var myDate = new Date();
                  var hrs = myDate.getHours();
                  var greet;
                  if (hrs < 12)
                    greet = 'Good morning';
                  else if (hrs >= 12 && hrs <= 17)
                    greet = 'Good afternoon';
                  else if (hrs >= 17 && hrs <= 24)
                    greet = 'Good evening';
                  document.getElementById('lblGreetings').innerHTML = greet;
                }

                /* Claims */

                function updateClaimsWidget() {
                  var incomplete = $("#text-input-incomplete").val();
                  $("#text-reflect-incomplete").html(incomplete);
                  var submitted = $("#text-input-submitted").val();
                  $("#text-reflect-submitted").html(submitted);
                  if (incomplete > 0 ){
                    $("#claims-incomplete").show();
                  } else {
                    $("#claims-incomplete").hide();
                  }
                  if (submitted > 0 ){
                    $("#claims-submitted").show();
                  } else {
                    $("#claims-submitted").hide();
                  }
                  if (incomplete > 0 || submitted > 0) {
                     $("#widget-claims").show("fast");
                     totalWidgets++;
                    } else {
                      $("#widget-claims").hide("fast");
                  }
                  if (incomplete == 0 && submitted == 0) {
                     $("#claims").hide();
                  } else {
                    $("#claims").show();
                  }
                }

                /* Tasks */

                $("#text-input-tasks").val(0);
                function updateTasksWidget() {
                  var tasks = $("#text-input-tasks").val();
                  $("#text-reflect-tasks").html(tasks);
                  if (tasks > 0) {
                     $("#widget-tasks").show("fast");
                     ("#tasks").show();
                     totalWidgets++;
                    } else {
                      $("#widget-tasks").hide("fast");
                      $("#tasks").hide();
                  }
                }

                /* Payments */

                function updatePaymentsWidget() {
                  if ($('#payment-received').prop("checked") == true) {
                    $("#widget-payment").show("fast");
                    $("#payments").show();
                    totalWidgets++;
                  } else {
                    $("#widget-payment").hide("fast");
                    $("#payments").hide();
                  }
                }

                /* Profile */

                function updateProfileWidget() {
                    if ( $("#service-history").prop("checked") == true ) {
                        $("#widget-profile .widget-content").html("generic profile message");
                    } else {
                        $("#widget-profile .widget-content").html("service history message");
                    }
                }

                /* --- End widgets --- */

                /* Update everything */

                var totalWidgets;
                function updateScenario(){
                    hideAll();
                    totalWidgets = 0;
                    updateGreeting();
                    updateTasksWidget();
                    updateClaimsWidget();
                    updatePaymentsWidget();
                    updateProfileWidget();
                    /* add backup widget */
                    if ( totalWidgets <= 1 ) {
                       $("#widget-profile").show("fast");
                    }
                    /* Over ride for first login */
                    if ($('#first-login').prop("checked") == true) {
                      hideAll();
                      $("#first-login-message").show("fast");
                    }
                }

                /* Init */

                updateScenario();
                function hideAll() {
                  $("#widget-claims").hide();
                  $("#widget-tasks").hide();
                  $("#widget-payment").hide();
                  $("#widget-profile").hide();
                  $("#first-login-message").hide();
                  $("#update-message").hide();
                }

                /* Layout */
                
                // function autoWith() {

                  // var $checkboxes = $('#state-switcher input[type="checkbox"]');
                  // var $textboxes = $('#state-switcher input[type="text"]');

                  // $checkboxes.change(function () {
                  //   var countCheckedCheckboxes = $checkboxes.filter(':checked').length;
                  //   var countCheckedTextboxes = $textboxes.filter(':checked').length;

                  //   var totalCountWidget = parseInt(countCheckedTextboxes, 10) + parseInt(countCheckedCheckboxes, 10);

                  //   if (totalCountWidget == 1) {
                  //     $('.widget-tile').addClass('col-sm-12');
                  //     $('.widget-tile').removeClass('col-xs-6');
                  //     $('.widget-tile').removeClass('col-xs-4');
                  //     $('.widget-tile').removeClass('col-xs-3');
                  //   }
                  //   if (totalCountWidget == 2) {
                  //     $('.widget-tile').removeClass('col-sm-12');
                  //     $('.widget-tile').addClass('col-xs-6');
                  //     $('.widget-tile').removeClass('col-xs-4');
                  //     $('.widget-tile').removeClass('col-xs-3');
                  //   }
                  //   if (totalCountWidget == 3) {
                  //     $('.widget-tile').removeClass('col-sm-12');
                  //     $('.widget-tile').removeClass('col-xs-6');
                  //     $('.widget-tile').addClass('col-xs-4');
                  //     $('.widget-tile').removeClass('col-xs-3');
                  //   }
                  //   if (totalCountWidget == 4) {
                  //     $('.widget-tile').removeClass('col-sm-12');
                  //     $('.widget-tile').removeClass('col-xs-6');
                  //     $('.widget-tile').removeClass('col-xs-4');
                  //     $('.widget-tile').addClass('col-xs-3');
                  //   }
                  // });

              
               
                // function lblGreetings() {
                //   if ($('#lblGreetings').prop("checked") == true) {
                //     $("#lblGreetings").show("fast");
                //   } else {
                //     $("#lblGreetings").hide("fast");
                //     //hide other greeting
                //   }
                // }

           });

          </script>
</body>

</html>

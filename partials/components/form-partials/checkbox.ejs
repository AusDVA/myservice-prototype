<%

if (typeof id === "undefined") var id = formPartialsID("checkbox");
let boxCounter = 0;

%>

<div class="form-group" <%- typeof modifiers !== "undefined" && modifiers && modifiers.includes("hidden") ? "hidden" : "" %>>
  <fieldset
    class="uikit-text-input__label legend-label"
    <%- typeof modifiers !== "undefined" && modifiers && modifiers.includes("disabled") ? "disabled" : "" %>
    id="<%- id %>"
  >

    <legend 
      for="<%- id %>"
      class="uikit-text-input__label"
    >
        <%- typeof legend !== "undefined" ? legend : "" %>

        <% if (typeof tooltip !== "undefined" && typeof tooltip.screenreaderText !== "undefined" && typeof tooltip.content !== "undefined") { %>
          <%- 
            generateTooltip({
              screenreaderText: tooltip.screenreaderText,
              content: tooltip.content,
              id,
              modifiers
            })
          %>
        <% } %>
        
        <% if (typeof hint !== "undefined") { %>
          <span class="hint"><%- typeof modifiers !== "undefined" && modifiers && modifiers.includes("hintNewLine") ? "<br>" : "" %><%- hint %></span>
        <% } %>
    </legend>

    <% const boxs = boxes.map(box => {
      boxCounter++;

      if (typeof box === "string") {
        box = {
          text: box,
          baseID: id,
          type: "checkbox",
          boxID: boxCounter 
        }

      } else if (typeof box === "object") {
        box.baseID = id;
        box.type = "checkbox";
        box.boxID = boxCounter;
      }

      %>

      <%- generateCheckRadio(box).html; %>

      <% 


        let { toggle, rToggle, inject } = generateCheckRadio(box);
        return {
          toggle,
          rToggle,
          inject
        }

      });
      %>

  </fieldset>

  <% if (!boxs.includes(undefined)) { %>
    <script type="text/javascript">
      $("#<%- id %>").change("input[type=checkbox]", function() {
        $("input[type=checkbox]:checked", this).each(function() {
          $($(this).data("toggle")).show();
          $($(this).data("r-toggle")).hide();
          $($(this).data("inject")).clone().insertAfter($(this).closest(".uiToolKitCheckBox"));
          $(this).closest("fieldset").find($($(this).data("inject"))).show();
        });

        $("input[type=checkbox]:not(:checked)", this).each(function() {
          $($(this).data("toggle")).hide();
          $($(this).data("r-toggle")).show();
          $(this).closest("fieldset").find($(this).data("inject")).remove();
        });
      })
    </script>
  <% } %>

</div>